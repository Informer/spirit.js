/*! Spirit - v0.1.0 - 2014-03-21
* http://spiritjs.io/
* Copyright (c) 2014 Patrick Brouwer; 
*/
(function(t){"use strict";var e="function"==typeof t.define&&"object"==typeof t.define.amd&&t.define.amd,n=e?{}:t;n.use=function(t){for(var e=t.split("."),n=0,r=e.length,i=window;r>n;++n){var o=e[n];i[o]||(i[o]={}),i=i[o]}return i},n.exist=function(t){if("string"!=typeof t)return!1;for(var e=t.split("."),r=!0,i=0,o=e.length,u=n;o>i;++i){var s=e[i];if(!u[s]){r=!1;break}u=u[s]}return r},e&&t.define(function(){return n})})(window),function(t){(function(){function e(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;i>++r;)if(t[r]===e)return r;return-1}function n(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||n===tn)return 1;if(r>n||r===tn)return-1}return t.index-e.index}function r(t){return"\\"+yn[t]}function i(){}function o(t){return t instanceof o?t:new u(t)}function u(t,e){this.__chain__=!!e,this.__wrapped__=t}function s(t,e,n){if("function"!=typeof t)return Le;if(e===tn)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Oe(t,e)}function a(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,u=[];o>++i;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Vn(s)||m(s))){e||(s=a(s,e,n));var l=-1,c=s.length,f=u.length;for(u.length+=c;c>++l;)u[f++]=s[l]}else n||u.push(s)}return u}function l(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var i=typeof t,u=typeof e;if(!(t!==t||t&&mn[i]||e&&mn[u]))return!1;if(null==t||null==e)return t===e;var s=$n.call(t),a=$n.call(e);if(s!=a)return!1;switch(s){case cn:case fn:return+t==+e;case pn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case vn:case gn:return t==e+""}var c=s==ln;if(!c){if(kn.call(t,"__wrapped__ ")||e instanceof o)return l(t.__wrapped__||t,e.__wrapped__||e,n,r);if(s!=dn)return!1;var f=t.constructor,h=e.constructor;if(f!=h&&!(k(f)&&f instanceof f&&k(h)&&h instanceof h))return!1}n||(n=[]),r||(r=[]);for(var p=n.length;p--;)if(n[p]==t)return r[p]==e;var d=!0,v=0;if(n.push(t),r.push(e),c){if(v=e.length,d=v==t.length)for(;v--&&(d=l(t[v],e[v],n,r)););return d}return er(e,function(e,i,o){return kn.call(o,i)?(v++,!(d=kn.call(t,i)&&l(t[i],e,n,r))&&nn):tn}),d&&er(t,function(t,e,n){return kn.call(n,e)?!(d=--v>-1)&&nn:tn}),d}function c(t,e,n){for(var r=-1,i=v(),o=t?t.length:0,u=[],s=n?[]:u;o>++r;){var a=t[r],l=n?n(a,r,t):a;(e?!r||s[s.length-1]!==l:0>i(s,l))&&(n&&s.push(l),u.push(a))}return u}function f(t){return function(e,n,r){var i={};n=Ne(n,r,3);var o=-1,u=e?e.length:0;if("number"==typeof u)for(;u>++o;){var s=e[o];t(i,s,n(s,o,e),e)}else nr(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function h(t,e,n,r,i,o){var u=1&e,s=2&e,a=4&e,l=8&e,c=16&e,f=32&e,d=t;if(!s&&!k(t))throw new TypeError;if(c&&!n.length&&(e&=-17,c=n=!1),f&&!r.length&&(e&=-33,f=r=!1),!u||s||a||f||!(Hn.fastBind||zn&&c))g=function(){var v=arguments,m=u?i:this;if((a||c||f)&&(v=Pn.call(v),c&&In.apply(v,n),f&&Cn.apply(v,r),a&&o>v.length))return e|=16,h(t,l?e:-4&e,v,null,i,o);if(s&&(t=m[d]),this instanceof g){m=p(t.prototype);var y=t.apply(m,v);return N(y)?y:m}return t.apply(m,v)};else{if(c){var v=[i];Cn.apply(v,n)}var g=c?zn.apply(t,v):zn.call(t,i)}return g}function p(t){return N(t)?Fn(t):{}}function d(t){return Xn[t]}function v(){var t=(t=o.indexOf)===de?e:t;return t}function g(t){return Yn[t]}function m(t){return t&&"object"==typeof t&&"number"==typeof t.length&&$n.call(t)==an||!1}function y(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function _(t){return N(t)?Vn(t)?Pn.call(t):y({},t):t}function b(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]===tn&&(t[i]=r[i])}return t}function w(t){var e=[];return er(t,function(t,n){k(t)&&e.push(n)}),e.sort()}function x(t,e){return t?kn.call(t,e):!1}function A(t){for(var e=-1,n=Kn(t),r=n.length,i={};r>++e;){var o=n[e];i[t[o]]=o}return i}function T(t){return t===!0||t===!1||$n.call(t)==cn}function j(t){return t?"object"==typeof t&&$n.call(t)==fn:!1}function E(t){return t?1===t.nodeType:!1}function M(t){if(!t)return!0;if(Vn(t)||F(t))return!t.length;for(var e in t)if(kn.call(t,e))return!1;return!0}function O(t,e){return l(t,e)}function S(t){return Rn(t)&&!Dn(parseFloat(t))}function k(t){return"function"==typeof t}function N(t){return!(!t||!mn[typeof t])}function C(t){return I(t)&&t!=+t}function $(t){return null===t}function I(t){return"number"==typeof t||$n.call(t)==pn}function z(t){return t&&mn[typeof t]?$n.call(t)==vn:!1}function F(t){return"string"==typeof t||$n.call(t)==gn}function B(t){return t===tn}function R(t){var e=v(),n=a(arguments,!0,!1,1),r={};return er(t,function(t,i){0>e(n,i)&&(r[i]=t)}),r}function D(t){for(var e=-1,n=Kn(t),r=n.length,i=Array(r);r>++e;){var o=n[e];i[e]=[o,t[o]]}return i}function q(t){for(var e=-1,n=a(arguments,!0,!1,1),r=n.length,i={};r>++e;){var o=n[e];o in t&&(i[o]=t[o])}return i}function L(t){for(var e=-1,n=Kn(t),r=n.length,i=Array(r);r>++e;)i[e]=t[n[e]];return i}function W(t,e){var n=v(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=n(t,e)>-1:nr(t,function(t){return(i=t===e)&&nn}),i}function J(t,e,n){var r=!0;e=Ne(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i&&(r=!!e(t[i],i,t)););else nr(t,function(t,n,i){return!(r=!!e(t,n,i))&&nn});return r}function P(t,e,n){var r=[];e=Ne(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i;){var u=t[i];e(u,i,t)&&r.push(u)}else nr(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function Q(t,e,n){e=Ne(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return nr(t,function(t,n,r){return e(t,n,r)?(o=t,nn):tn}),o}for(;i>++r;){var u=t[r];if(e(u,r,t))return u}}function U(t,e){return le(t,e,!0)}function H(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&n===tn?e:s(e,n,3),"number"==typeof i)for(;i>++r&&e(t[r],r,t)!==nn;);else nr(t,e)}function V(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var r=Kn(t);n=r.length,nr(t,function(t,i,o){return i=r?r[--n]:--n,e(o[i],i,o)===!1&&nn})}}function G(t,e){var n=Pn.call(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,u=Array("number"==typeof o?o:0);return H(t,function(t){u[++r]=(i?e:t[e]).apply(t,n)}),u}function K(t,e,n){var r=-1,i=t?t.length:0;if(e=Ne(e,n,3),"number"==typeof i)for(var o=Array(i);i>++r;)o[r]=e(t[r],r,t);else o=[],nr(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function X(t,e,n){var r=-1/0,i=r,o=-1,u=t?t.length:0;if(e||"number"!=typeof u)e=Ne(e,n,3),H(t,function(t,n,o){var u=e(t,n,o);u>r&&(r=u,i=t)});else for(;u>++o;){var s=t[o];s>i&&(i=s)}return i}function Y(t,e,n){var r=1/0,i=r,o=-1,u=t?t.length:0;if(e||"number"!=typeof u)e=Ne(e,n,3),H(t,function(t,n,o){var u=e(t,n,o);r>u&&(r=u,i=t)});else for(;u>++o;){var s=t[o];i>s&&(i=s)}return i}function Z(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r)for(var i=Array(r);r>++n;)i[n]=t[n][e];return i||K(t,e)}function te(t,e,n,r){if(!t)return n;var i=3>arguments.length;e=s(e,r,4);var o=-1,u=t.length;if("number"==typeof u)for(i&&(n=t[++o]);u>++o;)n=e(n,t[o],o,t);else nr(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function ee(t,e,n,r){var i=3>arguments.length;return e=s(e,r,4),V(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function ne(t,e,n){return e=Ne(e,n,3),P(t,function(t,n,r){return!e(t,n,r)})}function re(t,e,n){var r=t?t.length:0;if("number"!=typeof r&&(t=L(t)),null==e||n)return t?t[Pe(r-1)]:tn;var i=ie(t);return i.length=Wn(Ln(0,e),i.length),i}function ie(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return H(t,function(t){var n=Pe(++e);r[e]=r[n],r[n]=t}),r}function oe(t){var e=t?t.length:0;return"number"==typeof e?e:Kn(t).length}function ue(t,e,n){var r;e=Ne(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i&&!(r=e(t[i],i,t)););else nr(t,function(t,n,i){return(r=e(t,n,i))&&nn});return!!r}function se(t,e,r){var i=-1,o=t?t.length:0,u=Array("number"==typeof o?o:0);for(e=Ne(e,r,3),H(t,function(t,n,r){u[++i]={criteria:e(t,n,r),index:i,value:t}}),o=u.length,u.sort(n);o--;)u[o]=u[o].value;return u}function ae(t){return Vn(t)?Pn.call(t):t&&"number"==typeof t.length?K(t):L(t)}function le(t,e,n){return n&&M(e)?tn:(n?Q:P)(t,e)}function ce(t){for(var e=-1,n=t?t.length:0,r=[];n>++e;){var i=t[e];i&&r.push(i)}return r}function fe(t){for(var e=-1,n=v(),r=t.length,i=a(arguments,!0,!0,1),o=[];r>++e;){var u=t[e];0>n(i,u)&&o.push(u)}return o}function he(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=Ne(e,n,3);i>++o&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[0]:tn;return Pn.call(t,0,Wn(Ln(0,r),i))}function pe(t,e){return a(t,e)}function de(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?Ln(0,i+r):r||0}else if(r){var o=we(t,n);return t[o]===n?o:-1}return e(t,n,r)}function ve(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Ne(e,n,3);o--&&e(t[o],o,t);)r++}else r=null==e||n?1:e||r;return Pn.call(t,0,Wn(Ln(0,i-r),i))}function ge(t){var e=arguments,n=e.length,r=-1,i=v(),o=t?t.length:0,u=[];t:for(;o>++r;){var s=t[r];if(0>i(u,s)){for(var a=n;--a;)if(0>i(e[a],s))continue t;u.push(s)}}return u}function me(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Ne(e,n,3);o--&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:tn;return Pn.call(t,Ln(0,i-r))}function ye(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Ln(0,r+n):Wn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function _e(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Ln(0,On((e-t)/n)),o=Array(i);i>++r;)o[r]=t,t+=n;return o}function be(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,o=t?t.length:0;for(e=Ne(e,n,3);o>++i&&e(t[i],i,t);)r++}else r=null==e||n?1:Ln(0,e);return Pn.call(t,r)}function we(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?Ne(n,r,1):Le,e=n(e);o>i;){var u=i+o>>>1;e>n(t[u])?i=u+1:o=u}return i}function xe(){return c(a(arguments,!0,!0))}function Ae(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=r&&r[e]===t?null:e,e=!1),null!=n&&(n=Ne(n,r,3)),c(t,e,n)}function Te(t){return fe(t,Pn.call(arguments,1))}function je(){for(var t=-1,e=X(Z(arguments,"length")),n=Array(0>e?0:e);e>++t;)n[t]=Z(arguments,t);return n}function Ee(t,e){for(var n=-1,r=t?t.length:0,i={};r>++n;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Me(t,e){if(!k(e))throw new TypeError;return function(){return 1>--t?e.apply(this,arguments):tn}}function Oe(t,e){return arguments.length>2?h(t,17,Pn.call(arguments,2),null,e):h(t,1,null,null,e)}function Se(t){for(var e=arguments.length>1?a(arguments,!0,!1,1):w(t),n=-1,r=e.length;r>++n;){var i=e[n];t[i]=h(t[i],1,null,null,t)}return t}function ke(){for(var t=arguments,e=t.length;e--;)if(!k(t[e]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Ne(t,e,n){var r=typeof t;if(null==t||"function"==r)return s(t,e,n);if("object"!=r)return function(e){return e[t]};var i=Kn(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function Ce(t,e,n){var r,i,o,u,s,a,l,c=0,f=!1,h=!0;if(!k(t))throw new TypeError;if(e=Ln(0,e)||0,n===!0){var p=!0;h=!1}else N(n)&&(p=n.leading,f="maxWait"in n&&(Ln(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var d=function(){var n=e-(Nn()-u);if(0>=n){i&&clearTimeout(i);var f=l;i=a=l=tn,f&&(c=Nn(),o=t.apply(s,r))}else a=setTimeout(d,n)},v=function(){a&&clearTimeout(a),i=a=l=tn,(h||f!==e)&&(c=Nn(),o=t.apply(s,r))};return function(){if(r=arguments,u=Nn(),s=this,l=h&&(a||!p),f===!1)var n=p&&!a;else{i||p||(c=u);var g=f-(u-c);0>=g?(i&&(i=clearTimeout(i)),c=u,o=t.apply(s,r)):i||(i=setTimeout(v,g))}return a||e===f||(a=setTimeout(d,e)),n&&(o=t.apply(s,r)),o}}function $e(t){if(!k(t))throw new TypeError;var e=Pn.call(arguments,1);return setTimeout(function(){t.apply(tn,e)},1)}function Ie(t,e){if(!k(t))throw new TypeError;var n=Pn.call(arguments,2);return setTimeout(function(){t.apply(tn,n)},e)}function ze(t,e){var n={};return function(){var r=e?e.apply(this,arguments):rn+arguments[0];return kn.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}}function Fe(t){var e,n;if(!k(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Be(t){return h(t,16,Pn.call(arguments,1))}function Re(t,e,n){var r=!0,i=!0;if(!k(t))throw new TypeError;return n===!1?r=!1:N(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=e,n.trailing=i,Ce(t,e,n)}function De(t,e){if(!k(e))throw new TypeError;return function(){var n=[t];return Cn.apply(n,arguments),e.apply(this,n)}}function qe(t){return null==t?"":(t+"").replace(tr,d)}function Le(t){return t}function We(t){H(w(t),function(e){var n=o[e]=t[e];o.prototype[e]=function(){var t=[this.__wrapped__];Cn.apply(t,arguments);var e=n.apply(o,t);return this.__chain__?new u(e,!0):e}})}function Je(){return _n._=En,this}function Pe(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0,t+Sn(Jn()*(e-t+1))}function Qe(t,e){if(t){var n=t[e];return k(n)?t[e]():n}}function Ue(t,e,n){var i=o,u=i.templateSettings;t||(t=""),n=b({},n,u);var s=0,a="__p += '",l=n.variable,c=RegExp((n.escape||un).source+"|"+(n.interpolate||un).source+"|"+(n.evaluate||un).source+"|$","g");t.replace(c,function(e,n,i,o,u){return a+=t.slice(s,u).replace(sn,r),n&&(a+="' +\n_.escape("+n+") +\n'"),o&&(a+="';\n"+o+";\n__p += '"),i&&(a+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),s=u+e.length,e}),a+="';\n",l||(l="obj",a="with ("+l+" || {}) {\n"+a+"\n}\n"),a="function("+l+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+a+"return __p\n}";try{var f=Function("_","return "+a)(i)}catch(h){throw h.source=a,h}return e?f(e):(f.source=a,f)}function He(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=Array(t);for(e=s(e,n,1);t>++r;)i[r]=e(r);return i}function Ve(t){return null==t?"":(t+"").replace(Zn,g)}function Ge(t){var e=++en+"";return t?t+e:e}function Ke(t){return t=new u(t),t.__chain__=!0,t}function Xe(t,e){return e(t),t}function Ye(){return this.__chain__=!0,this}function Ze(){return this.__wrapped__}var tn,en=0,nn={},rn=+new Date+"",on=/<%=([\s\S]+?)%>/g,un=/($^)/,sn=/['\n\r\t\u2028\u2029\\]/g,an="[object Arguments]",ln="[object Array]",cn="[object Boolean]",fn="[object Date]",hn="[object Function]",pn="[object Number]",dn="[object Object]",vn="[object RegExp]",gn="[object String]",mn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},yn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},_n=mn[typeof window]&&window||this,bn=mn[typeof exports]&&exports&&!exports.nodeType&&exports,wn=mn[typeof module]&&module&&!module.nodeType&&module,xn=wn&&wn.exports===bn&&bn,An=mn[typeof global]&&global;!An||An.global!==An&&An.window!==An||(_n=An);var Tn=[],jn=Object.prototype,En=_n._,Mn=RegExp("^"+(jn.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),On=Math.ceil,Sn=Math.floor,kn=jn.hasOwnProperty,Nn=Mn.test(Nn=Date.now)&&Nn||function(){return+new Date},Cn=Tn.push,$n=jn.toString,In=Tn.unshift,zn=Mn.test(zn=$n.bind)&&zn,Fn=Mn.test(Fn=Object.create)&&Fn,Bn=Mn.test(Bn=Array.isArray)&&Bn,Rn=_n.isFinite,Dn=_n.isNaN,qn=Mn.test(qn=Object.keys)&&qn,Ln=Math.max,Wn=Math.min,Jn=Math.random,Pn=Tn.slice,Qn=Mn.test(_n.attachEvent),Un=zn&&!/\n|true/.test(zn+Qn);u.prototype=o.prototype;var Hn={};(function(){var t={0:1,length:1};Hn.fastBind=zn&&!Un,Hn.spliceObjects=(Tn.splice.call(t,0,1),!t[0])})(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:on,variable:""},Fn||(p=function(t){if(N(t)){i.prototype=t;var e=new i;i.prototype=null}return e||{}}),m(arguments)||(m=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&kn.call(t,"callee")||!1});var Vn=Bn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&$n.call(t)==ln||!1},Gn=function(t){var e,n=t,r=[];if(!n)return r;if(!mn[typeof t])return r;for(e in n)kn.call(n,e)&&r.push(e);return r},Kn=qn?function(t){return N(t)?qn(t):[]}:Gn,Xn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Yn=A(Xn),Zn=RegExp("("+Kn(Yn).join("|")+")","g"),tr=RegExp("["+Kn(Xn).join("")+"]","g"),er=function(t,e){var n,r=t,i=r;if(!r)return i;if(!mn[typeof r])return i;for(n in r)if(e(r[n],n,t)===nn)return i;return i},nr=function(t,e){var n,r=t,i=r;if(!r)return i;if(!mn[typeof r])return i;for(n in r)if(kn.call(r,n)&&e(r[n],n,t)===nn)return i;return i};k(/x/)&&(k=function(t){return"function"==typeof t&&$n.call(t)==hn});var rr=f(function(t,e,n){kn.call(t,n)?t[n]++:t[n]=1}),ir=f(function(t,e,n){(kn.call(t,n)?t[n]:t[n]=[]).push(e)}),or=f(function(t,e,n){t[n]=e});o.after=Me,o.bind=Oe,o.bindAll=Se,o.chain=Ke,o.compact=ce,o.compose=ke,o.countBy=rr,o.debounce=Ce,o.defaults=b,o.defer=$e,o.delay=Ie,o.difference=fe,o.filter=P,o.flatten=pe,o.forEach=H,o.functions=w,o.groupBy=ir,o.indexBy=or,o.initial=ve,o.intersection=ge,o.invert=A,o.invoke=G,o.keys=Kn,o.map=K,o.max=X,o.memoize=ze,o.min=Y,o.omit=R,o.once=Fe,o.pairs=D,o.partial=Be,o.pick=q,o.pluck=Z,o.range=_e,o.reject=ne,o.rest=be,o.shuffle=ie,o.sortBy=se,o.tap=Xe,o.throttle=Re,o.times=He,o.toArray=ae,o.union=xe,o.uniq=Ae,o.values=L,o.where=le,o.without=Te,o.wrap=De,o.zip=je,o.collect=K,o.drop=be,o.each=H,o.extend=y,o.methods=w,o.object=Ee,o.select=P,o.tail=be,o.unique=Ae,o.clone=_,o.contains=W,o.escape=qe,o.every=J,o.find=Q,o.has=x,o.identity=Le,o.indexOf=de,o.isArguments=m,o.isArray=Vn,o.isBoolean=T,o.isDate=j,o.isElement=E,o.isEmpty=M,o.isEqual=O,o.isFinite=S,o.isFunction=k,o.isNaN=C,o.isNull=$,o.isNumber=I,o.isObject=N,o.isRegExp=z,o.isString=F,o.isUndefined=B,o.lastIndexOf=ye,o.mixin=We,o.noConflict=Je,o.random=Pe,o.reduce=te,o.reduceRight=ee,o.result=Qe,o.size=oe,o.some=ue,o.sortedIndex=we,o.template=Ue,o.unescape=Ve,o.uniqueId=Ge,o.all=J,o.any=ue,o.detect=Q,o.findWhere=U,o.foldl=te,o.foldr=ee,o.include=W,o.inject=te,o.first=he,o.last=me,o.sample=re,o.take=he,o.head=he,We(o),o.VERSION="2.2.1",o.prototype.chain=Ye,o.prototype.value=Ze,H(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Tn[t];o.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),Hn.spliceObjects||0!==t.length||delete t[0],this}}),H(["concat","join","slice"],function(t){var e=Tn[t];o.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new u(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(_n._=o,define(function(){return o})):bn&&wn?xn?(wn.exports=o)._=o:bn._=o:o.extend(t,o)}).call(t)}(use("spirit._helpers")),function(t){"use strict";var e=function(){};t.extendObject=function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r};var n=function(n,r,i){var o,u=n.prototype,s=/xyz/.test(function(t){})?/\b_super\b/:/.*/;if(o=r&&r.hasOwnProperty("constructor")?r.constructor:function(){n.apply(this,arguments)},t.extend(o,n),e.prototype=n.prototype,o.prototype=new e,r){t.extend(o.prototype,r);for(var a in r)"function"==typeof r[a]&&"function"==typeof u[a]&&s.test(r[a])&&(o.prototype[a]=function(t,e){return function(){var n=this._super;this._super=u[t];var r=e.apply(this,arguments);return this._super=n,r}}(a,r[a]))}return i&&t.extend(o,i),o.prototype.constructor=o,o.__super__=n.prototype,o};t.extendObjectWithSuper=function(e,r){var i=n(this,e,r);return i.extend=t.extendObject,i},t.autoBind=function(e){var n=t.functions(e.constructor.prototype);t.each(n,function(n){"_"!==n.charAt(0)&&-1===t.indexOf(["autoBind","constructor"],n)&&(e[n]=t.bind(e[n],e))})},t.testMode=function(){return!!window.__karma__}}(use("spirit._helpers")),function(t){"use strict";var e=use("spirit._helpers"),n=/\s+/,r=function(t,e,r,i){if(!r)return!0;if("object"==typeof r){for(var o in r)t[e].apply(t,[o,r[o]].concat(i));return!1}if(n.test(r)){for(var u=r.split(n),s=0,a=u.length;a>s;s++)t[e].apply(t,[u[s]].concat(i));return!1}return!0},i=function(t,e){var n,r=-1,i=t.length,o=e[0],u=e[1],s=e[2];switch(e.length){case 0:for(;i>++r;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o,u);return;case 3:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o,u,s);return;default:for(;i>++r;)(n=t[r]).callback.apply(n.ctx,e)}};t.Events={on:function(t,e,n){if(!r(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,n,i){if(!r(this,"once",t,[n,i])||!n)return this;var o=this,u=e.once(function(){o.off(t,u),n.apply(this,arguments)});return u._callback=n,this.on(t,u,i)},off:function(t,n,i){var o,u,s,a,l,c,f,h;if(!this._events||!r(this,"off",t,[n,i]))return this;if(!t&&!n&&!i)return this._events={},this;for(a=t?[t]:e.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=o=[],n||i)for(f=0,h=s.length;h>f;f++)u=s[f],(n&&n!==u.callback&&n!==u.callback._callback||i&&i!==u.context)&&o.push(u);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=[].slice.call(arguments,1);if(!r(this,"trigger",t,e))return this;var n=this._events[t],o=this._events.all;return n&&i(n,e),o&&i(o,arguments),this},stopListening:function(t,n,r){var i=this._listeningTo;if(!i)return this;var o=!n&&!r;r||"object"!=typeof n||(r=this),t&&((i={})[t._listenId]=t);for(var u in i)t=i[u],t.off(n,r,this),(o||e.isEmpty(t._events))&&delete this._listeningTo[u];return this}}}(use("spirit.event")),function(t){"use strict";var e=use("spirit._helpers"),n=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}},r=function(t){var n=t;try{if(e.isString(n)&&exist(n)&&(n=use(n)),n.parseable===!0)return n;if(n.constructor.parseable===!0)return n.constructor}catch(r){}return!1};t.AbstractModel=function(t,n){this._parseables={},e.each(this.defaults,function(t,e){var n=r(t);n&&(this._parseables[e]=n)},this);var i=t||{};n||(n={}),this.cid=e.uniqueId("c"),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(i=this.parse(i,n)||{}),i=e.defaults({},i,e.result(this,"defaults")),this.set(i,n),this.changed={},this.initialize.apply(this,arguments)},t.AbstractModel.extend=e.extendObjectWithSuper,e.extend(t.AbstractModel.prototype,use("spirit.event").Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){return e.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(n,r,i){var o,u,s,a,l,c,f,h;if(null==n)return this;if("object"==typeof n?(u=n,i=r):(u={})[n]=r,i||(i={}),!this._validate(u,i))return!1;s=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=e.clone(this.attributes),this.changed={}),h=this.attributes,f=this._previousAttributes,this.idAttribute in u&&(this.id=u[this.idAttribute]);for(o in u)if(r=u[o],e.isEqual(h[o],r)||a.push(o),e.isEqual(f[o],r)?delete this.changed[o]:this.changed[o]=r,s)delete h[o];else{var p=this._parseables[o];h[o]=p?e.isArray(r)||e.isObject(r)&&r instanceof t.AbstractModel?new p(r):new p:r}if(!l){a.length&&(this._pending=!0);for(var d=0,v=a.length;v>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,e.extend({},n,{unset:!0}))},clear:function(t){var n={};for(var r in this.attributes)n[r]=void 0;return this.set(n,e.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!e.isEmpty(this.changed):e.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?e.clone(this.changed):!1;var n,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)e.isEqual(i[o],n=t[o])||((r||(r={}))[o]=n);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var r=this,i=t.success;return t.success=function(e){return r.set(r.parse(e,t),t)?(i&&i(r,e,t),r.trigger("sync",r,e,t),void 0):!1},n(this,t),this.sync("read",this,t)},destroy:function(t){t=t?e.clone(t):{};var r=this,i=t.success,o=function(){r.trigger("destroy",r,r.collection,t)};return t.success=function(e){(t.wait||r.isNew())&&o(),i&&i(r,e,t),r.isNew()||r.trigger("sync",r,e,t)},this.isNew()?(t.success(),!1):(n(this,t),t.wait||o(),!0)},url:function(){var t=e.result(this,"urlRoot")||e.result(this.collection,"url")||urlError();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},e.extend(t||{},{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e.extend({},this.attributes,t);var r=this.validationError=this.validate(t,n)||null;return r?(this.trigger("invalid",this,r,e.extend(n,{validationError:r})),!1):!0}});var i=["keys","values","pairs","invert","pick","omit"];e.each(i,function(n){t.AbstractModel.prototype[n]=function(){var t=slice.call(arguments);return t.unshift(this.attributes),e[n].apply(e,t)}})}(use("spirit.model")),function(t){"use strict";t.StateModel=t.AbstractModel.extend({defaults:{name:"undefined",tweenObj:{}}})}(use("spirit.model")),function(t){"use strict";t.TimelineElementModel=t.AbstractModel.extend({defaults:{el:null,id:null,transitions:"spirit.collection.TransitionCollection"},initialize:function(t){return this._super(t),this}})}(use("spirit.model")),function(t){"use strict";t.TransitionModel=t.AbstractModel.extend({defaults:{params:null,ease:"Linear.easeNone"},initialize:function(){}})}(use("spirit.model")),function(t){"use strict";var e=use("spirit._helpers");t.TransitionParamModel=t.AbstractModel.extend({initialize:function(){console.log("TransitionParamModel -> initialize",e.isPrototypeOf(this))}})}(use("spirit.model")),function(t){"use strict";var e=use("spirit._helpers"),n={add:!0,remove:!0,merge:!0},r={add:!0,remove:!1};t.AbstractCollection=function(t,n){this.model=exist(this.model)?use(this.model):use("spirit.model").AbstractModel,n||(n={}),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,e.extend({silent:!0},n))},t.AbstractCollection.extend=e.extendObjectWithSuper,e.extend(t.AbstractCollection.prototype,use("spirit.event").Events,{model:"spirit.model.AbstractModel",initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,n){return this.set(t,e.extend({merge:!1},n,r))},remove:function(t,n){var r=!e.isArray(t);t=r?[t]:e.clone(t),n||(n={});var i,o,u,s;for(i=0,o=t.length;o>i;i++)s=t[i]=this.get(t[i]),s&&(delete this._byId[s.id],delete this._byId[s.cid],u=this.indexOf(s),this.models.splice(u,1),this.length--,n.silent||(n.index=u,s.trigger("remove",s,this,n)),this._removeReference(s));return r?t[0]:t},set:function(t,r){r=e.defaults({},r,n),r.parse&&(t=this.parse(t,r));var i=!e.isArray(t);t=i?t?[t]:[]:e.clone(t);var o,u,s,a,l,c,f,h=r.at,p=this.model,d=this.comparator&&null==h&&r.sort!==!1,v=e.isString(this.comparator)?this.comparator:null,g=[],m=[],y={},_=r.add,b=r.merge,w=r.remove,x=!d&&_&&w?[]:!1;for(o=0,u=t.length;u>o;o++){if(l=t[o],s=l instanceof use("spirit.model").AbstractModel?a=l:l[p.prototype.idAttribute],c=this.get(s))w&&(y[c.cid]=!0),b&&(l=l===a?a.attributes:l,r.parse&&(l=c.parse(l,r)),c.set(l,r),d&&!f&&c.hasChanged(v)&&(f=!0)),t[o]=c;else if(_){if(a=t[o]=this._prepareModel(l,r),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}x&&x.push(c||a)}if(w){for(o=0,u=this.length;u>o;++o)y[(a=this.models[o]).cid]||m.push(a);m.length&&this.remove(m,r)}if(g.length||x&&x.length)if(d&&(f=!0),this.length+=g.length,null!=h)for(o=0,u=g.length;u>o;o++)this.models.splice(h+o,0,g[o]);else{x&&(this.models.length=0);var A=x||g;for(o=0,u=A.length;u>o;o++)this.models.push(A[o])}if(f&&this.sort({silent:!0}),!r.silent){for(o=0,u=g.length;u>o;o++)(a=g[o]).trigger("add",a,this,r);(f||x&&x.length)&&this.trigger("sort",this,r)}return i?t[0]:t},reset:function(t,n){n||(n={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r]);return n.previousModels=this.models,this._reset(),t=this.add(t,e.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),t},push:function(t,n){return this.add(t,e.extend({at:this.length},n))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,n){return this.add(t,e.extend({at:0},n))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return slice.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,n){return e.isEmpty(t)?n?void 0:[]:this[n?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return e.invoke(this.models,"get",t)},create:function(t,n){if(n=n?e.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var r=this,i=n.success;return n.success=function(t,e,n){n.wait&&r.add(t,n),i&&i(t,e,n)},t.save(null,n),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,n){if(t instanceof use("spirit.model").AbstractModel)return t.collection||(t.collection=this),t;n=n?e.clone(n):{},n.collection=this;var r=new this.model(t,n);return r.validationError?(this.trigger("invalid",this,r.validationError,n),!1):r},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),t.AbstractCollection.parseable=!0;var i=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];e.each(i,function(n){t.AbstractCollection.prototype[n]=function(){var t=[].slice.call(arguments);return t.unshift(this.models),e[n].apply(e,t)}});var o=["groupBy","countBy","sortBy"];e.each(o,function(n){t.AbstractCollection.prototype[n]=function(t,r){var i=e.isFunction(t)?t:function(e){return e.get(t)};return e[n](this.models,i,r)}})}(use("spirit.collection")),function(t){"use strict";t.StatesCollection=t.AbstractCollection.extend({model:"spirit.model.StateModel"})}(use("spirit.collection")),function(t){"use strict";t.TransitionCollection=t.AbstractCollection.extend({model:"spirit.model.TransitionModel",initialize:function(){this.on("add",this.added),this.on("remove",this.removed)},added:function(){},removed:function(){}})}(use("spirit.collection")),function(t){"use strict";
var e=use("spirit._helpers"),n=function(){if(e.testMode())return!1;if(this._debug&&window.console&&e.isFunction(window.console.log)){var t=[].slice.call(arguments);t.unshift("Spirit: ->"),console.log.apply(console,t)}return!0},r=function(){return{tweenEngine:{tween:e.isFunction(window.TweenMax)?window.TweenMax:window.TweenLite,timeline:e.isFunction(window.TimelineMax)?window.TimelineMax:window.TimelineLite},childSelector:"*",forceDebug:!1}};t.Timeline=function(n,i){if(0===arguments.length||!e.some([Array,HTMLElement,$],function(t){return n instanceof t}))throw t.Timeline.errorMessages.noContainerElementFound;this.$el=$($(n).get(0)),this._validateOptions(e.extend(this.options,r(),i||{})),this._debug=!!this.options.forceDebug,this._construct()},t.Timeline.extend=e.extendObjectWithSuper,e.extend(t.Timeline.prototype,use("spirit.event").Events,{_json:{},$el:null,$elements:null,options:{},timeline:null,_construct:function(){n.call(this,"Spirit constructed"),this.$elements=this.$el.find(this.options.childSelector),this.initialize(),this.jsonData&&this.parseJSON(this.jsonData)},_validateOptions:function(){if(!e.isFunction(this.options.tweenEngine.tween)||!e.isFunction(this.options.tweenEngine.timeline))throw t.Timeline.errorMessages.invalidTweeningEngines},initialize:function(){n.call(this,"initialized with options: ",this.options)},preConstructTimeline:function(t){return n.call(this,"preconstruct Timeline"),t},constructTimeline:function(){},update:function(t){return n.call(this,"update:",t),t},toJSON:function(){return{}},parseJSON:function(t){this._json=t,n.call(this,"parseJSON",t)},kill:function(){}}),e.extend(t.Timeline.prototype,{_debug:!1,forceDebug:function(t){this._debug=t},isDebug:function(){return this._debug}}),e.extend(t.Timeline.prototype,{}),e.extend(t.Timeline,{errorMessages:{noContainerElementFound:"Spirit: no container element found! Make sure you provide a container element",invalidTweeningEngines:"Spirit: no Tween[Lite/Max] or Timeline[Lite/Max] found. Both are required in order to use Spirit"}})}(use("spirit")),function(){"use strict";var t=use("spirit._helpers"),e=(use("spirit.model"),use("spirit.collection")),n=t.isFunction(window.TweenMax)?window.TweenMax:window.TweenLite,r=function(e){if(t.isUndefined(e)||!t.isString(e))return{};var n;try{var r=e.replace(/'|"/g,"").replace(/((?![\d]+|\.)[#\w\.]+|(\+|-)?[\d]+(%|px|em|deg))/g,'"$1"');n=$.parseJSON(r)}catch(i){}return n};$.fn.spiritAnimateTo=function(){var e=[].slice.call(arguments),n=function(){return t.isString(e[0])},r=function(){return t.isNumber(e[0])};return n()?o.animateToState.apply(this,[e[0],t.isNumber(e[1])?e[1]:i.speed,t.isObject(e[2])?e[2]:{}]):r()?o.animateTo.apply(this,[e[0],t.isObject(e[1])?e[1]:{}]):($.error("invalid function parameters provided for jQuery.spiritAnimateTo. First param needs to be a state (string) or speed (number)"),void 0)};var i={speed:1},o={animateToState:function(n,i,u){return this.each(function(){var s=$(this),a=s.data("spirit-states");if(t.isString(a)){var l=new e.StatesCollection,c=r(a);if(!c)return s.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: could not parse states: "+a}),void 0;t.each(c,function(t,e){l.add({name:e,tweenObj:t},{silent:!0})}),s.data("spirit-states",l),a=l}if(a instanceof e.StatesCollection){var f=a.where({name:n});if(0===f.length)return s.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+n+"] not found on element"}),void 0;var h=t.first(f).get("tweenObj");t.isObject(h)&&o.animateTo.apply(this,[i,t.extend(h,u)])}else s.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+n+"] not found on element"})})},animateTo:function(t,e){var r=function(){var r=$(this);n&&n.to(r,t,e)};return this instanceof HTMLElement?r.call(this):this.each(r)}}}();