/*! Spirit - v0.1.0 - 2014-03-25
* http://spiritjs.io/
* Copyright (c) 2014 Patrick Brouwer; 
*/
(function(t){var e={},n=function(t){for(var n=t.split("."),r=0,i=n.length,o=e;i>r;++r){var u=n[r];o[u]||(o[u]={}),o=o[u]}return o},r=function(t){if("string"!=typeof t)return!1;for(var n=t.split("."),r=!0,i=0,o=n.length,u=e;o>i;++i){var s=n[i];if(!u[s]){r=!1;break}u=u[s]}return r};(function(e){(function(){function n(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;i>++r;)if(t[r]===e)return r;return-1}function r(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||n===en)return 1;if(r>n||r===en)return-1}return t.index-e.index}function i(t){return"\\"+_n[t]}function o(){}function u(t){return t instanceof u?t:new s(t)}function s(t,e){this.__chain__=!!e,this.__wrapped__=t}function a(t,e,n){if("function"!=typeof t)return Le;if(e===en)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Se(t,e)}function c(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,u=[];o>++i;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Gn(s)||y(s))){e||(s=c(s,e,n));var a=-1,l=s.length,f=u.length;for(u.length+=l;l>++a;)u[f++]=s[a]}else n||u.push(s)}return u}function l(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var i=typeof t,o=typeof e;if(!(t!==t||t&&yn[i]||e&&yn[o]))return!1;if(null==t||null==e)return t===e;var s=Bn.call(t),a=Bn.call(e);if(s!=a)return!1;switch(s){case fn:case hn:return+t==+e;case dn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case gn:case mn:return t==e+""}var c=s==ln;if(!c){if(Nn.call(t,"__wrapped__ ")||e instanceof u)return l(t.__wrapped__||t,e.__wrapped__||e,n,r);if(s!=vn)return!1;var f=t.constructor,h=e.constructor;if(f!=h&&!(N(f)&&f instanceof f&&N(h)&&h instanceof h))return!1}n||(n=[]),r||(r=[]);for(var p=n.length;p--;)if(n[p]==t)return r[p]==e;var d=!0,v=0;if(n.push(t),r.push(e),c){if(v=e.length,d=v==t.length)for(;v--&&(d=l(t[v],e[v],n,r)););return d}return nr(e,function(e,i,o){return Nn.call(o,i)?(v++,!(d=Nn.call(t,i)&&l(t[i],e,n,r))&&rn):en}),d&&nr(t,function(t,e,n){return Nn.call(n,e)?!(d=--v>-1)&&rn:en}),d}function f(t,e,n){for(var r=-1,i=g(),o=t?t.length:0,u=[],s=n?[]:u;o>++r;){var a=t[r],c=n?n(a,r,t):a;(e?!r||s[s.length-1]!==c:0>i(s,c))&&(n&&s.push(c),u.push(a))}return u}function h(t){return function(e,n,r){var i={};n=Ce(n,r,3);var o=-1,u=e?e.length:0;if("number"==typeof u)for(;u>++o;){var s=e[o];t(i,s,n(s,o,e),e)}else rr(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function p(t,e,n,r,i,o){var u=1&e,s=2&e,a=4&e,c=8&e,l=16&e,f=32&e,h=t;if(!s&&!N(t))throw new TypeError;if(l&&!n.length&&(e&=-17,l=n=!1),f&&!r.length&&(e&=-33,f=r=!1),!u||s||a||f||!(Hn.fastBind||$n&&l))g=function(){var v=arguments,m=u?i:this;if((a||l||f)&&(v=Pn.call(v),l&&Rn.apply(v,n),f&&In.apply(v,r),a&&o>v.length))return e|=16,p(t,c?e:-4&e,v,null,i,o);if(s&&(t=m[h]),this instanceof g){m=d(t.prototype);var y=t.apply(m,v);return C(y)?y:m}return t.apply(m,v)};else{if(l){var v=[i];In.apply(v,n)}var g=l?$n.apply(t,v):$n.call(t,i)}return g}function d(t){return C(t)?zn(t):{}}function v(t){return Yn[t]}function g(){var t=(t=u.indexOf)===ve?n:t;return t}function m(t){return Zn[t]}function y(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Bn.call(t)==cn||!1}function _(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function b(t){return C(t)?Gn(t)?Pn.call(t):_({},t):t}function w(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]===en&&(t[i]=r[i])}return t}function x(t){var e=[];return nr(t,function(t,n){N(t)&&e.push(n)}),e.sort()}function A(t,e){return t?Nn.call(t,e):!1}function j(t){for(var e=-1,n=Xn(t),r=n.length,i={};r>++e;){var o=n[e];i[t[o]]=o}return i}function T(t){return t===!0||t===!1||Bn.call(t)==fn}function E(t){return t?"object"==typeof t&&Bn.call(t)==hn:!1}function M(t){return t?1===t.nodeType:!1}function O(t){if(!t)return!0;if(Gn(t)||z(t))return!t.length;for(var e in t)if(Nn.call(t,e))return!1;return!0}function S(t,e){return l(t,e)}function k(t){return qn(t)&&!Wn(parseFloat(t))}function N(t){return"function"==typeof t}function C(t){return!(!t||!yn[typeof t])}function I(t){return R(t)&&t!=+t}function B(t){return null===t}function R(t){return"number"==typeof t||Bn.call(t)==dn}function $(t){return t&&yn[typeof t]?Bn.call(t)==gn:!1}function z(t){return"string"==typeof t||Bn.call(t)==mn}function F(t){return t===en}function q(t){var e=g(),n=c(arguments,!0,!1,1),r={};return nr(t,function(t,i){0>e(n,i)&&(r[i]=t)}),r}function W(t){for(var e=-1,n=Xn(t),r=n.length,i=Array(r);r>++e;){var o=n[e];i[e]=[o,t[o]]}return i}function D(t){for(var e=-1,n=c(arguments,!0,!1,1),r=n.length,i={};r>++e;){var o=n[e];o in t&&(i[o]=t[o])}return i}function L(t){for(var e=-1,n=Xn(t),r=n.length,i=Array(r);r>++e;)i[e]=t[n[e]];return i}function J(t,e){var n=g(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=n(t,e)>-1:rr(t,function(t){return(i=t===e)&&rn}),i}function Q(t,e,n){var r=!0;e=Ce(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i&&(r=!!e(t[i],i,t)););else rr(t,function(t,n,i){return!(r=!!e(t,n,i))&&rn});return r}function P(t,e,n){var r=[];e=Ce(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i;){var u=t[i];e(u,i,t)&&r.push(u)}else rr(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function U(t,e,n){e=Ce(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return rr(t,function(t,n,r){return e(t,n,r)?(o=t,rn):en}),o}for(;i>++r;){var u=t[r];if(e(u,r,t))return u}}function V(t,e){return le(t,e,!0)}function H(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&n===en?e:a(e,n,3),"number"==typeof i)for(;i>++r&&e(t[r],r,t)!==rn;);else rr(t,e)}function G(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var r=Xn(t);n=r.length,rr(t,function(t,i,o){return i=r?r[--n]:--n,e(o[i],i,o)===!1&&rn})}}function K(t,e){var n=Pn.call(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,u=Array("number"==typeof o?o:0);return H(t,function(t){u[++r]=(i?e:t[e]).apply(t,n)}),u}function X(t,e,n){var r=-1,i=t?t.length:0;if(e=Ce(e,n,3),"number"==typeof i)for(var o=Array(i);i>++r;)o[r]=e(t[r],r,t);else o=[],rr(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function Y(t,e,n){var r=-1/0,i=r,o=-1,u=t?t.length:0;if(e||"number"!=typeof u)e=Ce(e,n,3),H(t,function(t,n,o){var u=e(t,n,o);u>r&&(r=u,i=t)});else for(;u>++o;){var s=t[o];s>i&&(i=s)}return i}function Z(t,e,n){var r=1/0,i=r,o=-1,u=t?t.length:0;if(e||"number"!=typeof u)e=Ce(e,n,3),H(t,function(t,n,o){var u=e(t,n,o);r>u&&(r=u,i=t)});else for(;u>++o;){var s=t[o];i>s&&(i=s)}return i}function te(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r)for(var i=Array(r);r>++n;)i[n]=t[n][e];return i||X(t,e)}function ee(t,e,n,r){if(!t)return n;var i=3>arguments.length;e=a(e,r,4);var o=-1,u=t.length;if("number"==typeof u)for(i&&(n=t[++o]);u>++o;)n=e(n,t[o],o,t);else rr(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function ne(t,e,n,r){var i=3>arguments.length;return e=a(e,r,4),G(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function re(t,e,n){return e=Ce(e,n,3),P(t,function(t,n,r){return!e(t,n,r)})}function ie(t,e,n){var r=t?t.length:0;if("number"!=typeof r&&(t=L(t)),null==e||n)return t?t[Pe(r-1)]:en;var i=oe(t);return i.length=Jn(Ln(0,e),i.length),i}function oe(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return H(t,function(t){var n=Pe(++e);r[e]=r[n],r[n]=t}),r}function ue(t){var e=t?t.length:0;return"number"==typeof e?e:Xn(t).length}function se(t,e,n){var r;e=Ce(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i&&!(r=e(t[i],i,t)););else rr(t,function(t,n,i){return(r=e(t,n,i))&&rn});return!!r}function ae(t,e,n){var i=-1,o=t?t.length:0,u=Array("number"==typeof o?o:0);for(e=Ce(e,n,3),H(t,function(t,n,r){u[++i]={criteria:e(t,n,r),index:i,value:t}}),o=u.length,u.sort(r);o--;)u[o]=u[o].value;return u}function ce(t){return Gn(t)?Pn.call(t):t&&"number"==typeof t.length?X(t):L(t)}function le(t,e,n){return n&&O(e)?en:(n?U:P)(t,e)}function fe(t){for(var e=-1,n=t?t.length:0,r=[];n>++e;){var i=t[e];i&&r.push(i)}return r}function he(t){for(var e=-1,n=g(),r=t.length,i=c(arguments,!0,!0,1),o=[];r>++e;){var u=t[e];0>n(i,u)&&o.push(u)}return o}function pe(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=Ce(e,n,3);i>++o&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[0]:en;return Pn.call(t,0,Jn(Ln(0,r),i))}function de(t,e){return c(t,e)}function ve(t,e,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?Ln(0,i+r):r||0}else if(r){var o=xe(t,e);return t[o]===e?o:-1}return n(t,e,r)}function ge(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Ce(e,n,3);o--&&e(t[o],o,t);)r++}else r=null==e||n?1:e||r;return Pn.call(t,0,Jn(Ln(0,i-r),i))}function me(t){var e=arguments,n=e.length,r=-1,i=g(),o=t?t.length:0,u=[];t:for(;o>++r;){var s=t[r];if(0>i(u,s)){for(var a=n;--a;)if(0>i(e[a],s))continue t;u.push(s)}}return u}function ye(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Ce(e,n,3);o--&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:en;return Pn.call(t,Ln(0,i-r))}function _e(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Ln(0,r+n):Jn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function be(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Ln(0,Sn((e-t)/n)),o=Array(i);i>++r;)o[r]=t,t+=n;return o}function we(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,o=t?t.length:0;for(e=Ce(e,n,3);o>++i&&e(t[i],i,t);)r++}else r=null==e||n?1:Ln(0,e);return Pn.call(t,r)}function xe(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?Ce(n,r,1):Le,e=n(e);o>i;){var u=i+o>>>1;e>n(t[u])?i=u+1:o=u}return i}function Ae(){return f(c(arguments,!0,!0))}function je(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=r&&r[e]===t?null:e,e=!1),null!=n&&(n=Ce(n,r,3)),f(t,e,n)}function Te(t){return he(t,Pn.call(arguments,1))}function Ee(){for(var t=-1,e=Y(te(arguments,"length")),n=Array(0>e?0:e);e>++t;)n[t]=te(arguments,t);return n}function Me(t,e){for(var n=-1,r=t?t.length:0,i={};r>++n;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Oe(t,e){if(!N(e))throw new TypeError;return function(){return 1>--t?e.apply(this,arguments):en}}function Se(t,e){return arguments.length>2?p(t,17,Pn.call(arguments,2),null,e):p(t,1,null,null,e)}function ke(t){for(var e=arguments.length>1?c(arguments,!0,!1,1):x(t),n=-1,r=e.length;r>++n;){var i=e[n];t[i]=p(t[i],1,null,null,t)}return t}function Ne(){for(var t=arguments,e=t.length;e--;)if(!N(t[e]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Ce(t,e,n){var r=typeof t;if(null==t||"function"==r)return a(t,e,n);if("object"!=r)return function(e){return e[t]};var i=Xn(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function Ie(t,e,n){var r,i,o,u,s,a,c,l=0,f=!1,h=!0;if(!N(t))throw new TypeError;if(e=Ln(0,e)||0,n===!0){var p=!0;h=!1}else C(n)&&(p=n.leading,f="maxWait"in n&&(Ln(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var d=function(){var n=e-(Cn()-u);if(0>=n){i&&clearTimeout(i);var f=c;i=a=c=en,f&&(l=Cn(),o=t.apply(s,r))}else a=setTimeout(d,n)},v=function(){a&&clearTimeout(a),i=a=c=en,(h||f!==e)&&(l=Cn(),o=t.apply(s,r))};return function(){if(r=arguments,u=Cn(),s=this,c=h&&(a||!p),f===!1)var n=p&&!a;else{i||p||(l=u);var g=f-(u-l);0>=g?(i&&(i=clearTimeout(i)),l=u,o=t.apply(s,r)):i||(i=setTimeout(v,g))}return a||e===f||(a=setTimeout(d,e)),n&&(o=t.apply(s,r)),o}}function Be(t){if(!N(t))throw new TypeError;var e=Pn.call(arguments,1);return setTimeout(function(){t.apply(en,e)},1)}function Re(t,e){if(!N(t))throw new TypeError;var n=Pn.call(arguments,2);return setTimeout(function(){t.apply(en,n)},e)}function $e(t,e){var n={};return function(){var r=e?e.apply(this,arguments):on+arguments[0];return Nn.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}}function ze(t){var e,n;if(!N(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Fe(t){return p(t,16,Pn.call(arguments,1))}function qe(t,e,n){var r=!0,i=!0;if(!N(t))throw new TypeError;return n===!1?r=!1:C(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=e,n.trailing=i,Ie(t,e,n)}function We(t,e){if(!N(e))throw new TypeError;return function(){var n=[t];return In.apply(n,arguments),e.apply(this,n)}}function De(t){return null==t?"":(t+"").replace(er,v)}function Le(t){return t}function Je(t){H(x(t),function(e){var n=u[e]=t[e];u.prototype[e]=function(){var t=[this.__wrapped__];In.apply(t,arguments);var e=n.apply(u,t);return this.__chain__?new s(e,!0):e}})}function Qe(){return bn._=Mn,this}function Pe(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0,t+kn(Qn()*(e-t+1))}function Ue(t,e){if(t){var n=t[e];return N(n)?t[e]():n}}function Ve(t,e,n){var r=u,o=r.templateSettings;t||(t=""),n=w({},n,o);var s=0,a="__p += '",c=n.variable,l=RegExp((n.escape||sn).source+"|"+(n.interpolate||sn).source+"|"+(n.evaluate||sn).source+"|$","g");t.replace(l,function(e,n,r,o,u){return a+=t.slice(s,u).replace(an,i),n&&(a+="' +\n_.escape("+n+") +\n'"),o&&(a+="';\n"+o+";\n__p += '"),r&&(a+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=u+e.length,e}),a+="';\n",c||(c="obj",a="with ("+c+" || {}) {\n"+a+"\n}\n"),a="function("+c+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+a+"return __p\n}";try{var f=Function("_","return "+a)(r)}catch(h){throw h.source=a,h}return e?f(e):(f.source=a,f)}function He(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=Array(t);for(e=a(e,n,1);t>++r;)i[r]=e(r);return i}function Ge(t){return null==t?"":(t+"").replace(tr,m)}function Ke(t){var e=++nn+"";return t?t+e:e}function Xe(t){return t=new s(t),t.__chain__=!0,t}function Ye(t,e){return e(t),t}function Ze(){return this.__chain__=!0,this}function tn(){return this.__wrapped__}var en,nn=0,rn={},on=+new Date+"",un=/<%=([\s\S]+?)%>/g,sn=/($^)/,an=/['\n\r\t\u2028\u2029\\]/g,cn="[object Arguments]",ln="[object Array]",fn="[object Boolean]",hn="[object Date]",pn="[object Function]",dn="[object Number]",vn="[object Object]",gn="[object RegExp]",mn="[object String]",yn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},_n={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},bn=yn[typeof window]&&window||this,wn=yn[typeof exports]&&exports&&!exports.nodeType&&exports,xn=yn[typeof module]&&module&&!module.nodeType&&module,An=xn&&xn.exports===wn&&wn,jn=yn[typeof t]&&t;!jn||jn.global!==jn&&jn.window!==jn||(bn=jn);var Tn=[],En=Object.prototype,Mn=bn._,On=RegExp("^"+(En.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Sn=Math.ceil,kn=Math.floor,Nn=En.hasOwnProperty,Cn=On.test(Cn=Date.now)&&Cn||function(){return+new Date},In=Tn.push,Bn=En.toString,Rn=Tn.unshift,$n=On.test($n=Bn.bind)&&$n,zn=On.test(zn=Object.create)&&zn,Fn=On.test(Fn=Array.isArray)&&Fn,qn=bn.isFinite,Wn=bn.isNaN,Dn=On.test(Dn=Object.keys)&&Dn,Ln=Math.max,Jn=Math.min,Qn=Math.random,Pn=Tn.slice,Un=On.test(bn.attachEvent),Vn=$n&&!/\n|true/.test($n+Un);s.prototype=u.prototype;var Hn={};(function(){var t={0:1,length:1};Hn.fastBind=$n&&!Vn,Hn.spliceObjects=(Tn.splice.call(t,0,1),!t[0])})(1),u.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:un,variable:""},zn||(d=function(t){if(C(t)){o.prototype=t;var e=new o;o.prototype=null}return e||{}}),y(arguments)||(y=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Nn.call(t,"callee")||!1});var Gn=Fn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Bn.call(t)==ln||!1},Kn=function(t){var e,n=t,r=[];if(!n)return r;if(!yn[typeof t])return r;for(e in n)Nn.call(n,e)&&r.push(e);return r},Xn=Dn?function(t){return C(t)?Dn(t):[]}:Kn,Yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Zn=j(Yn),tr=RegExp("("+Xn(Zn).join("|")+")","g"),er=RegExp("["+Xn(Yn).join("")+"]","g"),nr=function(t,e){var n,r=t,i=r;if(!r)return i;if(!yn[typeof r])return i;for(n in r)if(e(r[n],n,t)===rn)return i;return i},rr=function(t,e){var n,r=t,i=r;if(!r)return i;if(!yn[typeof r])return i;for(n in r)if(Nn.call(r,n)&&e(r[n],n,t)===rn)return i;return i};N(/x/)&&(N=function(t){return"function"==typeof t&&Bn.call(t)==pn});var ir=h(function(t,e,n){Nn.call(t,n)?t[n]++:t[n]=1}),or=h(function(t,e,n){(Nn.call(t,n)?t[n]:t[n]=[]).push(e)}),ur=h(function(t,e,n){t[n]=e});u.after=Oe,u.bind=Se,u.bindAll=ke,u.chain=Xe,u.compact=fe,u.compose=Ne,u.countBy=ir,u.debounce=Ie,u.defaults=w,u.defer=Be,u.delay=Re,u.difference=he,u.filter=P,u.flatten=de,u.forEach=H,u.functions=x,u.groupBy=or,u.indexBy=ur,u.initial=ge,u.intersection=me,u.invert=j,u.invoke=K,u.keys=Xn,u.map=X,u.max=Y,u.memoize=$e,u.min=Z,u.omit=q,u.once=ze,u.pairs=W,u.partial=Fe,u.pick=D,u.pluck=te,u.range=be,u.reject=re,u.rest=we,u.shuffle=oe,u.sortBy=ae,u.tap=Ye,u.throttle=qe,u.times=He,u.toArray=ce,u.union=Ae,u.uniq=je,u.values=L,u.where=le,u.without=Te,u.wrap=We,u.zip=Ee,u.collect=X,u.drop=we,u.each=H,u.extend=_,u.methods=x,u.object=Me,u.select=P,u.tail=we,u.unique=je,u.clone=b,u.contains=J,u.escape=De,u.every=Q,u.find=U,u.has=A,u.identity=Le,u.indexOf=ve,u.isArguments=y,u.isArray=Gn,u.isBoolean=T,u.isDate=E,u.isElement=M,u.isEmpty=O,u.isEqual=S,u.isFinite=k,u.isFunction=N,u.isNaN=I,u.isNull=B,u.isNumber=R,u.isObject=C,u.isRegExp=$,u.isString=z,u.isUndefined=F,u.lastIndexOf=_e,u.mixin=Je,u.noConflict=Qe,u.random=Pe,u.reduce=ee,u.reduceRight=ne,u.result=Ue,u.size=ue,u.some=se,u.sortedIndex=xe,u.template=Ve,u.unescape=Ge,u.uniqueId=Ke,u.all=Q,u.any=se,u.detect=U,u.findWhere=V,u.foldl=ee,u.foldr=ne,u.include=J,u.inject=ee,u.first=pe,u.last=ye,u.sample=ie,u.take=pe,u.head=pe,Je(u),u.VERSION="2.2.1",u.prototype.chain=Ze,u.prototype.value=tn,H(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Tn[t];u.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),Hn.spliceObjects||0!==t.length||delete t[0],this}}),H(["concat","join","slice"],function(t){var e=Tn[t];u.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new s(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(bn._=u,define(function(){return u})):wn&&xn?An?(xn.exports=u)._=u:wn._=u:u.extend(e,u)}).call(e)})(n("spirit._helpers")),function(t){"use strict";var e=function(){};t.extendObject=function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r};var n=function(n,r,i){var o,u=n.prototype,s=/xyz/.test(function(t){})?/\b_super\b/:/.*/;if(o=r&&r.hasOwnProperty("constructor")?r.constructor:function(){n.apply(this,arguments)},t.extend(o,n),e.prototype=n.prototype,o.prototype=new e,r){t.extend(o.prototype,r);for(var a in r)"function"==typeof r[a]&&"function"==typeof u[a]&&s.test(r[a])&&(o.prototype[a]=function(t,e){return function(){var n=this._super;this._super=u[t];var r=e.apply(this,arguments);return this._super=n,r}}(a,r[a]))}return i&&t.extend(o,i),o.prototype.constructor=o,o.__super__=n.prototype,o};t.extendObjectWithSuper=function(e,r){var i=n(this,e,r);return i.extend=t.extendObject,i},t.autoBind=function(e){var n=t.functions(e.constructor.prototype);t.each(n,function(n){"_"!==n.charAt(0)&&-1===t.indexOf(["autoBind","constructor"],n)&&(e[n]=t.bind(e[n],e))})},t.testMode=function(){return!!window.__karma__}}(n("spirit._helpers"));var i=n("spirit._helpers"),o={tween:i.isFunction(window.TweenMax)?window.TweenMax:window.TweenLite,timeline:i.isFunction(window.TimelineMax)?window.TimelineMax:window.TimelineLite};(function(t){"use strict";var e=/\s+/,n=function(t,n,r,i){if(!r)return!0;if("object"==typeof r){for(var o in r)t[n].apply(t,[o,r[o]].concat(i));return!1}if(e.test(r)){for(var u=r.split(e),s=0,a=u.length;a>s;s++)t[n].apply(t,[u[s]].concat(i));return!1}return!0},r=function(t,e){var n,r=-1,i=t.length,o=e[0],u=e[1],s=e[2];switch(e.length){case 0:for(;i>++r;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o,u);return;case 3:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o,u,s);return;default:for(;i>++r;)(n=t[r]).callback.apply(n.ctx,e)}};t.Events={on:function(t,e,r){if(!n(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!n(this,"once",t,[e,r])||!e)return this;var o=this,u=i.once(function(){o.off(t,u),e.apply(this,arguments)});return u._callback=e,this.on(t,u,r)},off:function(t,e,r){var o,u,s,a,c,l,f,h;if(!this._events||!n(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(a=t?[t]:i.keys(this._events),c=0,l=a.length;l>c;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=o=[],e||r)for(f=0,h=s.length;h>f;f++)u=s[f],(e&&e!==u.callback&&e!==u.callback._callback||r&&r!==u.context)&&o.push(u);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=[].slice.call(arguments,1);if(!n(this,"trigger",t,e))return this;var i=this._events[t],o=this._events.all;return i&&r(i,e),o&&r(o,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var u in r)t=r[u],t.off(e,n,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[u];return this}}})(n("spirit.event")),function(t){"use strict";var e=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}},o=function(t){var e=t;try{if(i.isString(e)&&r(e)&&(e=n(e)),e.parseable===!0)return e;if(e.constructor.parseable===!0)return e.constructor}catch(o){}return!1};t.AbstractModel=function(t,e){this._parseables={},i.each(this.defaults,function(t,e){var n=o(t);n&&(this._parseables[e]=n)},this);var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},t.AbstractModel.extend=i.extendObjectWithSuper,i.extend(t.AbstractModel.prototype,n("spirit.event").Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(e,n,r){var o,u,s,a,c,l,f,h;if(null==e)return this;if("object"==typeof e?(u=e,r=n):(u={})[e]=n,r||(r={}),!this._validate(u,r))return!1;s=r.unset,c=r.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,f=this._previousAttributes,this.idAttribute in u&&(this.id=u[this.idAttribute]);for(o in u)if(n=u[o],i.isEqual(h[o],n)||a.push(o),i.isEqual(f[o],n)?delete this.changed[o]:this.changed[o]=n,s)delete h[o];else{var p=this._parseables[o];h[o]=p?i.isArray(n)||i.isObject(n)&&n instanceof t.AbstractModel?new p(n):new p:n}if(!c){a.length&&(this._pending=!0);for(var d=0,v=a.length;v>d;d++)this.trigger("change:"+a[d],this,h[a[d]],r)}if(l)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(r[o],e=t[o])||((n||(n={}))[o]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e){return n.set(n.parse(e,t),t)?(r&&r(n,e,t),n.trigger("sync",n,e,t),void 0):!1},e(this,t),this.sync("read",this,t)},destroy:function(t){t=t?i.clone(t):{};var n=this,r=t.success,o=function(){n.trigger("destroy",n,n.collection,t)};return t.success=function(e){(t.wait||n.isNew())&&o(),r&&r(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew()?(t.success(),!1):(e(this,t),t.wait||o(),!0)},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||urlError();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var u=["keys","values","pairs","invert","pick","omit"];i.each(u,function(e){t.AbstractModel.prototype[e]=function(){var t=slice.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}})}(n("spirit.model")),function(t){"use strict";t.StateModel=t.AbstractModel.extend({defaults:{name:"undefined",tweenObj:{}}})}(n("spirit.model")),function(t){"use strict";t.TimelineModel=t.AbstractModel.extend({defaults:{el:null,id:null,transitions:"spirit.collection.TransitionCollection"}})}(n("spirit.model")),function(t){"use strict";t.TransitionModel=t.AbstractModel.extend({defaults:{params:null,ease:"Linear.easeNone"}})}(n("spirit.model")),function(t){"use strict";t.TransitionParamModel=t.AbstractModel.extend({})}(n("spirit.model")),function(t){"use strict";var e={add:!0,remove:!0,merge:!0},o={add:!0,remove:!1};t.AbstractCollection=function(t,e){this.model=r(this.model)?n(this.model):n("spirit.model").AbstractModel,e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},t.AbstractCollection.extend=i.extendObjectWithSuper,i.extend(t.AbstractCollection.prototype,n("spirit.event").Events,{model:"spirit.model.AbstractModel",initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){return this.set(t,i.extend({merge:!1},e,o))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,o,u,s;for(r=0,o=t.length;o>r;r++)s=t[r]=this.get(t[r]),s&&(delete this._byId[s.id],delete this._byId[s.cid],u=this.indexOf(s),this.models.splice(u,1),this.length--,e.silent||(e.index=u,s.trigger("remove",s,this,e)),this._removeReference(s));return n?t[0]:t},set:function(t,r){r=i.defaults({},r,e),r.parse&&(t=this.parse(t,r));var o=!i.isArray(t);t=o?t?[t]:[]:i.clone(t);var u,s,a,c,l,f,h,p=r.at,d=this.model,v=this.comparator&&null==p&&r.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=r.add,w=r.merge,x=r.remove,A=!v&&b&&x?[]:!1;for(u=0,s=t.length;s>u;u++){if(l=t[u],a=l instanceof n("spirit.model").AbstractModel?c=l:l[d.prototype.idAttribute],f=this.get(a))x&&(_[f.cid]=!0),w&&(l=l===c?c.attributes:l,r.parse&&(l=f.parse(l,r)),f.set(l,r),v&&!h&&f.hasChanged(g)&&(h=!0)),t[u]=f;else if(b){if(c=t[u]=this._prepareModel(l,r),!c)continue;m.push(c),c.on("all",this._onModelEvent,this),this._byId[c.cid]=c,null!=c.id&&(this._byId[c.id]=c)}A&&A.push(f||c)}if(x){for(u=0,s=this.length;s>u;++u)_[(c=this.models[u]).cid]||y.push(c);y.length&&this.remove(y,r)}if(m.length||A&&A.length)if(v&&(h=!0),this.length+=m.length,null!=p)for(u=0,s=m.length;s>u;u++)this.models.splice(p+u,0,m[u]);else{A&&(this.models.length=0);var j=A||m;for(u=0,s=j.length;s>u;u++)this.models.push(j[u])}if(h&&this.sort({silent:!0}),!r.silent){for(u=0,s=m.length;s>u;u++)(c=m[u]).trigger("add",c,this,r);(h||A&&A.length)&&this.trigger("sort",this,r)}return o?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return slice.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,e,i){i.wait&&n.add(t,i),r&&r(t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof n("spirit.model").AbstractModel)return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),t.AbstractCollection.parseable=!0;var u=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];i.each(u,function(e){t.AbstractCollection.prototype[e]=function(){var t=[].slice.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var s=["groupBy","countBy","sortBy"];i.each(s,function(e){t.AbstractCollection.prototype[e]=function(t,n){var r=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,r,n)}})}(n("spirit.collection")),function(t){"use strict";t.StatesCollection=t.AbstractCollection.extend({model:"spirit.model.StateModel"})}(n("spirit.collection")),function(t){"use strict";t.TransitionCollection=t.AbstractCollection.extend({model:"spirit.model.TransitionModel",initialize:function(){this.on("add",this.added),this.on("remove",this.removed)},added:function(){},removed:function(){}})}(n("spirit.collection")),function(){"use strict";var t=(n("spirit.model"),n("spirit.collection")),e=o.tween,r=function(t){if(i.isUndefined(t)||!i.isString(t))return{};var e;try{var n=t.replace(/'|"/g,"").replace(/((?![\d]+|\.)[#\w\.]+|(\+|-)?[\d]+(%|px|em|deg))/g,'"$1"');e=$.parseJSON(n)}catch(r){}return e};$.fn.spiritAnimateTo=function(){var t=[].slice.call(arguments),e=function(){return i.isString(t[0])
},n=function(){return i.isNumber(t[0])};return e()?s.animateToState.apply(this,[t[0],i.isNumber(t[1])?t[1]:u.speed,i.isObject(t[2])?t[2]:{}]):n()?s.animateTo.apply(this,[t[0],i.isObject(t[1])?t[1]:{}]):($.error("invalid function parameters provided for jQuery.spiritAnimateTo. First param needs to be a state (string) or speed (number)"),void 0)};var u={speed:1},s={animateToState:function(e,n,o){return this.each(function(){var u=$(this),a=u.data("spirit-states");if(i.isString(a)){var c=new t.StatesCollection,l=r(a);if(!l)return u.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: could not parse states: "+a}),void 0;i.each(l,function(t,e){c.add({name:e,tweenObj:t},{silent:!0})}),u.data("spirit-states",c),a=c}if(a instanceof t.StatesCollection){var f=a.where({name:e});if(0===f.length)return u.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+e+"] not found on element"}),void 0;var h=i.first(f).get("tweenObj");i.isObject(h)&&s.animateTo.apply(this,[n,i.extend(h,o)])}else u.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+e+"] not found on element"})})},animateTo:function(t,n){var r=function(){var r=$(this);e&&e.to(r,t,n)};return this instanceof HTMLElement?r.call(this):this.each(r)}}}(),"function"==typeof t.define&&t.define.amd?t.define("spiritjs",[],function(){return e}):i.extend(t,e)})(window);