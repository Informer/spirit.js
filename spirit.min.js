/*!
 * Spirit 0.1.0 (http://spiritjs.io/)
 * Copyright 2013 - 2015 Inlet.
 * Licensed under Apache 2.0 (https://github.com/inlet/spirit.js/blob/master/LICENSE)
 */
!function(global){var context={spirit:{VERSION:"0.1.0"}},contextInternally={},use=function(t,e){for(var n=t.split("."),r=0,i=n.length,o=e?context:contextInternally;i>r;++r){var s=n[r];o[s]||(o[s]={}),o=o[s]}return o},exist=function(t,e){if("string"!=typeof t)return!1;for(var n=t.split("."),r=!0,i=0,o=n.length,s=e?context:contextInternally;o>i;++i){var a=n[i];if(!s[a]){r=!1;break}s=s[a]}return r};!function(t){(function(){function e(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function n(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||"undefined"==typeof n)return 1;if(r>n||"undefined"==typeof r)return-1}return t.index-e.index}function r(t){return"\\"+_n[t]}function i(){}function o(t){return t instanceof o?t:new s(t)}function s(t,e){this.__chain__=!!e,this.__wrapped__=t}function a(t,e,n){if("function"!=typeof t)return Ve;if("undefined"==typeof e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return ke(t,e)}function u(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,s=[];++i<o;){var a=t[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(qn(a)||m(a))){e||(a=u(a,e,n));var c=-1,l=a.length,f=s.length;for(s.length+=l;++c<l;)s[f++]=a[c]}else n||s.push(a)}return s}function c(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var i=typeof t,s=typeof e;if(!(t!==t||t&&mn[i]||e&&mn[s]))return!1;if(null==t||null==e)return t===e;var a=Mn.call(t),u=Mn.call(e);if(a!=u)return!1;switch(a){case ln:case fn:return+t==+e;case pn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case gn:case vn:return t==String(e)}var l=a==cn;if(!l){if(Sn.call(t,"__wrapped__ ")||e instanceof o)return c(t.__wrapped__||t,e.__wrapped__||e,n,r);if(a!=dn)return!1;var f=t.constructor,h=e.constructor;if(f!=h&&!(R(f)&&f instanceof f&&R(h)&&h instanceof h))return!1}n||(n=[]),r||(r=[]);for(var p=n.length;p--;)if(n[p]==t)return r[p]==e;var d=!0,g=0;if(n.push(t),r.push(e),l){if(g=e.length,d=g==t.length)for(;g--&&(d=c(t[g],e[g],n,r)););return d}return tr(e,function(e,i,o){return Sn.call(o,i)?(g++,!(d=Sn.call(t,i)&&c(t[i],e,n,r))&&nn):void 0}),d&&tr(t,function(t,e,n){return Sn.call(n,e)?!(d=--g>-1)&&nn:void 0}),d}function l(t,e,n){for(var r=-1,i=g(),o=t?t.length:0,s=[],a=n?[]:s;++r<o;){var u=t[r],c=n?n(u,r,t):u;(e?!r||a[a.length-1]!==c:i(a,c)<0)&&(n&&a.push(c),s.push(u))}return s}function f(t){return function(e,n,r){var i={};n=Be(n,r,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s;){var a=e[o];t(i,a,n(a,o,e),e)}else er(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function h(t,e,n,r,i,o){var s=1&e,a=2&e,u=4&e,c=8&e,l=16&e,f=32&e,d=t;if(!a&&!R(t))throw new TypeError;if(l&&!n.length&&(e&=-17,l=n=!1),f&&!r.length&&(e&=-33,f=r=!1),s&&!(a||u||f)&&(Dn.fastBind||Cn&&l)){if(l){var g=[i];Bn.apply(g,n)}var v=l?Cn.apply(t,g):Cn.call(t,i)}else v=function(){var g=arguments,m=s?i:this;if((u||l||f)&&(g=Fn.call(g),l&&Nn.apply(g,n),f&&Bn.apply(g,r),u&&g.length<o))return e|=16,h(t,c?e:-4&e,g,null,i,o);if(a&&(t=m[d]),this instanceof v){m=p(t.prototype);var _=t.apply(m,g);return B(_)?_:m}return t.apply(m,g)};return v}function p(t){return B(t)?In(t):{}}function d(t){return Qn[t]}function g(){var t=(t=o.indexOf)===de?e:t;return t}function v(t){return Un[t]}function m(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Mn.call(t)==un||!1}function _(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function y(t){return B(t)?qn(t)?Fn.call(t):_({},t):t}function b(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)"undefined"==typeof t[i]&&(t[i]=r[i])}return t}function w(t){var e=[];return tr(t,function(t,n){R(t)&&e.push(n)}),e.sort()}function x(t,e){return t?Sn.call(t,e):!1}function T(t){for(var e=-1,n=Gn(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function A(t){return t===!0||t===!1||Mn.call(t)==ln}function E(t){return t?"object"==typeof t&&Mn.call(t)==fn:!1}function j(t){return t?1===t.nodeType:!1}function O(t){if(!t)return!0;if(qn(t)||L(t))return!t.length;for(var e in t)if(Sn.call(t,e))return!1;return!0}function k(t,e){return c(t,e)}function S(t){return Xn(t)&&!Yn(parseFloat(t))}function R(t){return"function"==typeof t}function B(t){return!(!t||!mn[typeof t])}function M(t){return C(t)&&t!=+t}function N(t){return null===t}function C(t){return"number"==typeof t||Mn.call(t)==pn}function I(t){return t&&mn[typeof t]?Mn.call(t)==gn:!1}function L(t){return"string"==typeof t||Mn.call(t)==vn}function X(t){return"undefined"==typeof t}function Y(t){var e=g(),n=u(arguments,!0,!1,1),r={};return tr(t,function(t,i){e(n,i)<0&&(r[i]=t)}),r}function W(t){for(var e=-1,n=Gn(t),r=n.length,i=Array(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function z(t){for(var e=-1,n=u(arguments,!0,!1,1),r=n.length,i={};++e<r;){var o=n[e];o in t&&(i[o]=t[o])}return i}function V(t){for(var e=-1,n=Gn(t),r=n.length,i=Array(r);++e<r;)i[e]=t[n[e]];return i}function $(t,e){var n=g(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=n(t,e)>-1:er(t,function(t){return(i=t===e)&&nn}),i}function F(t,e,n){var r=!0;e=Be(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&(r=!!e(t[i],i,t)););else er(t,function(t,n,i){return!(r=!!e(t,n,i))&&nn});return r}function J(t,e,n){var r=[];e=Be(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o;){var s=t[i];e(s,i,t)&&r.push(s)}else er(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function P(t,e,n){e=Be(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return er(t,function(t,n,r){return e(t,n,r)?(o=t,nn):void 0}),o}for(;++r<i;){var s=t[r];if(e(s,r,t))return s}}function D(t,e){return ce(t,e,!0)}function q(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:a(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==nn;);else er(t,e)}function Z(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var r=Gn(t);n=r.length,er(t,function(t,i,o){return i=r?r[--n]:--n,e(o[i],i,o)===!1&&nn})}}function G(t,e){var n=Fn.call(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,s=Array("number"==typeof o?o:0);return q(t,function(t){s[++r]=(i?e:t[e]).apply(t,n)}),s}function Q(t,e,n){var r=-1,i=t?t.length:0;if(e=Be(e,n,3),"number"==typeof i)for(var o=Array(i);++r<i;)o[r]=e(t[r],r,t);else o=[],er(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function U(t,e,n){var r=-1/0,i=r,o=-1,s=t?t.length:0;if(e||"number"!=typeof s)e=Be(e,n,3),q(t,function(t,n,o){var s=e(t,n,o);s>r&&(r=s,i=t)});else for(;++o<s;){var a=t[o];a>i&&(i=a)}return i}function H(t,e,n){var r=1/0,i=r,o=-1,s=t?t.length:0;if(e||"number"!=typeof s)e=Be(e,n,3),q(t,function(t,n,o){var s=e(t,n,o);r>s&&(r=s,i=t)});else for(;++o<s;){var a=t[o];i>a&&(i=a)}return i}function K(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r)for(var i=Array(r);++n<r;)i[n]=t[n][e];return i||Q(t,e)}function te(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=a(e,r,4);var o=-1,s=t.length;if("number"==typeof s)for(i&&(n=t[++o]);++o<s;)n=e(n,t[o],o,t);else er(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function ee(t,e,n,r){var i=arguments.length<3;return e=a(e,r,4),Z(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function ne(t,e,n){return e=Be(e,n,3),J(t,function(t,n,r){return!e(t,n,r)})}function re(t,e,n){var r=t?t.length:0;if("number"!=typeof r&&(t=V(t)),null==e||n)return t?t[Je(r-1)]:tn;var i=ie(t);return i.length=Vn(zn(0,e),i.length),i}function ie(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return q(t,function(t){var n=Je(++e);r[e]=r[n],r[n]=t}),r}function oe(t){var e=t?t.length:0;return"number"==typeof e?e:Gn(t).length}function se(t,e,n){var r;e=Be(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&!(r=e(t[i],i,t)););else er(t,function(t,n,i){return(r=e(t,n,i))&&nn});return!!r}function ae(t,e,r){var i=-1,o=t?t.length:0,s=Array("number"==typeof o?o:0);for(e=Be(e,r,3),q(t,function(t,n,r){s[++i]={criteria:e(t,n,r),index:i,value:t}}),o=s.length,s.sort(n);o--;)s[o]=s[o].value;return s}function ue(t){return qn(t)?Fn.call(t):t&&"number"==typeof t.length?Q(t):V(t)}function ce(t,e,n){return n&&O(e)?tn:(n?P:J)(t,e)}function le(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function fe(t){for(var e=-1,n=g(),r=t.length,i=u(arguments,!0,!0,1),o=[];++e<r;){var s=t[e];n(i,s)<0&&o.push(s)}return o}function he(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=Be(e,n,3);++o<i&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[0]:tn;return Fn.call(t,0,Vn(zn(0,r),i))}function pe(t,e){return u(t,e)}function de(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?zn(0,i+r):r||0}else if(r){var o=we(t,n);return t[o]===n?o:-1}return e(t,n,r)}function ge(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Be(e,n,3);o--&&e(t[o],o,t);)r++}else r=null==e||n?1:e||r;return Fn.call(t,0,Vn(zn(0,i-r),i))}function ve(t){var e=arguments,n=e.length,r=-1,i=g(),o=t?t.length:0,s=[];t:for(;++r<o;){var a=t[r];if(i(s,a)<0){for(var u=n;--u;)if(i(e[u],a)<0)continue t;s.push(a)}}return s}function me(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Be(e,n,3);o--&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:tn;return Fn.call(t,zn(0,i-r))}function _e(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?zn(0,r+n):Vn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function ye(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var r=-1,i=zn(0,On((e-t)/n)),o=Array(i);++r<i;)o[r]=t,t+=n;return o}function be(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,o=t?t.length:0;for(e=Be(e,n,3);++i<o&&e(t[i],i,t);)r++}else r=null==e||n?1:zn(0,e);return Fn.call(t,r)}function we(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?Be(n,r,1):Ve,e=n(e);o>i;){var s=i+o>>>1;n(t[s])<e?i=s+1:o=s}return i}function xe(){return l(u(arguments,!0,!0))}function Te(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=r&&r[e]===t?null:e,e=!1),null!=n&&(n=Be(n,r,3)),l(t,e,n)}function Ae(t){return fe(t,Fn.call(arguments,1))}function Ee(){for(var t=-1,e=U(K(arguments,"length")),n=Array(0>e?0:e);++t<e;)n[t]=K(arguments,t);return n}function je(t,e){for(var n=-1,r=t?t.length:0,i={};++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Oe(t,e){if(!R(e))throw new TypeError;return function(){return--t<1?e.apply(this,arguments):void 0}}function ke(t,e){return arguments.length>2?h(t,17,Fn.call(arguments,2),null,e):h(t,1,null,null,e)}function Se(t){for(var e=arguments.length>1?u(arguments,!0,!1,1):w(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=h(t[i],1,null,null,t)}return t}function Re(){for(var t=arguments,e=t.length;e--;)if(!R(t[e]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Be(t,e,n){var r=typeof t;if(null==t||"function"==r)return a(t,e,n);if("object"!=r)return function(e){return e[t]};var i=Gn(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function Me(t,e,n){var r,i,o,s,a,u,c,l=0,f=!1,h=!0;if(!R(t))throw new TypeError;if(e=zn(0,e)||0,n===!0){var p=!0;h=!1}else B(n)&&(p=n.leading,f="maxWait"in n&&(zn(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var d=function(){var n=e-(Rn()-s);if(0>=n){i&&clearTimeout(i);var f=c;i=u=c=tn,f&&(l=Rn(),o=t.apply(a,r))}else u=setTimeout(d,n)},g=function(){u&&clearTimeout(u),i=u=c=tn,(h||f!==e)&&(l=Rn(),o=t.apply(a,r))};return function(){if(r=arguments,s=Rn(),a=this,c=h&&(u||!p),f===!1)var n=p&&!u;else{i||p||(l=s);var v=f-(s-l);0>=v?(i&&(i=clearTimeout(i)),l=s,o=t.apply(a,r)):i||(i=setTimeout(g,v))}return u||e===f||(u=setTimeout(d,e)),n&&(o=t.apply(a,r)),o}}function Ne(t){if(!R(t))throw new TypeError;var e=Fn.call(arguments,1);return setTimeout(function(){t.apply(tn,e)},1)}function Ce(t,e){if(!R(t))throw new TypeError;var n=Fn.call(arguments,2);return setTimeout(function(){t.apply(tn,n)},e)}function Ie(t,e){var n={};return function(){var r=e?e.apply(this,arguments):rn+arguments[0];return Sn.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}}function Le(t){var e,n;if(!R(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Xe(t){return h(t,16,Fn.call(arguments,1))}function Ye(t,e,n){var r=!0,i=!0;if(!R(t))throw new TypeError;return n===!1?r=!1:B(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=e,n.trailing=i,Me(t,e,n)}function We(t,e){if(!R(e))throw new TypeError;return function(){var n=[t];return Bn.apply(n,arguments),e.apply(this,n)}}function ze(t){return null==t?"":String(t).replace(Kn,d)}function Ve(t){return t}function $e(t){q(w(t),function(e){var n=o[e]=t[e];o.prototype[e]=function(){var t=[this.__wrapped__];Bn.apply(t,arguments);var e=n.apply(o,t);return this.__chain__?new s(e,!0):e}})}function Fe(){return yn._=En,this}function Je(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0,t+kn($n()*(e-t+1))}function Pe(t,e){if(t){var n=t[e];return R(n)?t[e]():n}}function De(t,e,n){var i=o,s=i.templateSettings;t||(t=""),n=b({},n,s);var a=0,u="__p += '",c=n.variable,l=RegExp((n.escape||sn).source+"|"+(n.interpolate||sn).source+"|"+(n.evaluate||sn).source+"|$","g");t.replace(l,function(e,n,i,o,s){return u+=t.slice(a,s).replace(an,r),n&&(u+="' +\n_.escape("+n+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),a=s+e.length,e}),u+="';\n",c||(c="obj",u="with ("+c+" || {}) {\n"+u+"\n}\n"),u="function("+c+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var f=Function("_","return "+u)(i)}catch(h){throw h.source=u,h}return e?f(e):(f.source=u,f)}function qe(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=Array(t);for(e=a(e,n,1);++r<t;)i[r]=e(r);return i}function Ze(t){return null==t?"":String(t).replace(Hn,v)}function Ge(t){var e=++en+"";return t?t+e:e}function Qe(t){return t=new s(t),t.__chain__=!0,t}function Ue(t,e){return e(t),t}function He(){return this.__chain__=!0,this}function Ke(){return this.__wrapped__}var tn,en=0,nn={},rn=+new Date+"",on=/<%=([\s\S]+?)%>/g,sn=/($^)/,an=/['\n\r\t\u2028\u2029\\]/g,un="[object Arguments]",cn="[object Array]",ln="[object Boolean]",fn="[object Date]",hn="[object Function]",pn="[object Number]",dn="[object Object]",gn="[object RegExp]",vn="[object String]",mn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},_n={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},yn=mn[typeof window]&&window||this,bn=mn[typeof exports]&&exports&&!exports.nodeType&&exports,wn=mn[typeof module]&&module&&!module.nodeType&&module,xn=(wn&&wn.exports===bn&&bn,mn[typeof global]&&global);!xn||xn.global!==xn&&xn.window!==xn||(yn=xn);var Tn=[],An=Object.prototype,En=yn._,jn=RegExp("^"+String(An.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),On=Math.ceil,kn=Math.floor,Sn=An.hasOwnProperty,Rn=jn.test(Rn=Date.now)&&Rn||function(){return+new Date},Bn=Tn.push,Mn=An.toString,Nn=Tn.unshift,Cn=jn.test(Cn=Mn.bind)&&Cn,In=jn.test(In=Object.create)&&In,Ln=jn.test(Ln=Array.isArray)&&Ln,Xn=yn.isFinite,Yn=yn.isNaN,Wn=jn.test(Wn=Object.keys)&&Wn,zn=Math.max,Vn=Math.min,$n=Math.random,Fn=Tn.slice,Jn=jn.test(yn.attachEvent),Pn=Cn&&!/\n|true/.test(Cn+Jn);s.prototype=o.prototype;var Dn={};!function(){var t={0:1,length:1};Dn.fastBind=Cn&&!Pn,Dn.spliceObjects=(Tn.splice.call(t,0,1),!t[0])}(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:on,variable:""},In||(p=function(t){if(B(t)){i.prototype=t;var e=new i;i.prototype=null}return e||{}}),m(arguments)||(m=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Sn.call(t,"callee")||!1});var qn=Ln||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Mn.call(t)==cn||!1},Zn=function(t){var e,n=t,r=[];if(!n)return r;if(!mn[typeof t])return r;for(e in n)Sn.call(n,e)&&r.push(e);return r},Gn=Wn?function(t){return B(t)?Wn(t):[]}:Zn,Qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Un=T(Qn),Hn=RegExp("("+Gn(Un).join("|")+")","g"),Kn=RegExp("["+Gn(Qn).join("")+"]","g"),tr=function(t,e){var n,r=t,i=r;if(!r)return i;if(!mn[typeof r])return i;for(n in r)if(e(r[n],n,t)===nn)return i;return i},er=function(t,e){var n,r=t,i=r;if(!r)return i;if(!mn[typeof r])return i;for(n in r)if(Sn.call(r,n)&&e(r[n],n,t)===nn)return i;return i};R(/x/)&&(R=function(t){return"function"==typeof t&&Mn.call(t)==hn});var nr=f(function(t,e,n){Sn.call(t,n)?t[n]++:t[n]=1}),rr=f(function(t,e,n){(Sn.call(t,n)?t[n]:t[n]=[]).push(e)}),ir=f(function(t,e,n){t[n]=e});o.after=Oe,o.bind=ke,o.bindAll=Se,o.chain=Qe,o.compact=le,o.compose=Re,o.countBy=nr,o.debounce=Me,o.defaults=b,o.defer=Ne,o.delay=Ce,o.difference=fe,o.filter=J,o.flatten=pe,o.forEach=q,o.functions=w,o.groupBy=rr,o.indexBy=ir,o.initial=ge,o.intersection=ve,o.invert=T,o.invoke=G,o.keys=Gn,o.map=Q,o.max=U,o.memoize=Ie,o.min=H,o.omit=Y,o.once=Le,o.pairs=W,o.partial=Xe,o.pick=z,o.pluck=K,o.range=ye,o.reject=ne,o.rest=be,o.shuffle=ie,o.sortBy=ae,o.tap=Ue,o.throttle=Ye,o.times=qe,o.toArray=ue,o.union=xe,o.uniq=Te,o.values=V,o.where=ce,o.without=Ae,o.wrap=We,o.zip=Ee,o.collect=Q,o.drop=be,o.each=q,o.extend=_,o.methods=w,o.object=je,o.select=J,o.tail=be,o.unique=Te,o.clone=y,o.contains=$,o.escape=ze,o.every=F,o.find=P,o.has=x,o.identity=Ve,o.indexOf=de,o.isArguments=m,o.isArray=qn,o.isBoolean=A,o.isDate=E,o.isElement=j,o.isEmpty=O,o.isEqual=k,o.isFinite=S,o.isFunction=R,o.isNaN=M,o.isNull=N,o.isNumber=C,o.isObject=B,o.isRegExp=I,o.isString=L,o.isUndefined=X,o.lastIndexOf=_e,o.mixin=$e,o.noConflict=Fe,o.random=Je,o.reduce=te,o.reduceRight=ee,o.result=Pe,o.size=oe,o.some=se,o.sortedIndex=we,o.template=De,o.unescape=Ze,o.uniqueId=Ge,o.all=F,o.any=se,o.detect=P,o.findWhere=D,o.foldl=te,o.foldr=ee,o.include=$,o.inject=te,o.first=he,o.last=me,o.sample=re,o.take=he,o.head=he,$e(o),o.VERSION="2.2.1",o.prototype.chain=He,o.prototype.value=Ke,q(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Tn[t];o.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),Dn.spliceObjects||0!==t.length||delete t[0],this}}),q(["concat","join","slice"],function(t){var e=Tn[t];o.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new s(n),n.__chain__=!0),n}}),o.extend(t,o)}).call(t)}(use("spirit._helpers")),function(t){"use strict";var e=function(){};t.extendObject=function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r};var n=function(n,r,i){var o,s=n.prototype,a=/xyz/.test(function(t){})?/\b_super\b/:/.*/;if(o=r&&r.hasOwnProperty("constructor")?r.constructor:function(){n.apply(this,arguments)},t.extend(o,n),e.prototype=n.prototype,o.prototype=new e,r){t.extend(o.prototype,r);for(var u in r)"function"==typeof r[u]&&"function"==typeof s[u]&&a.test(r[u])&&(o.prototype[u]=function(t,e){return function(){var n=this._super;this._super=s[t];var r=e.apply(this,arguments);return this._super=n,r}}(u,r[u]))}return i&&t.extend(o,i),o.prototype.constructor=o,o.__super__=n.prototype,o};t.extendObjectWithSuper=function(e,r){var i=n(this,e,r);return i.extend=t.extendObject,i},t.autoBind=function(e){var n=t.functions(e.constructor.prototype);t.each(n,function(n){"_"!==n.charAt(0)&&-1===t.indexOf(["autoBind","constructor"],n)&&(e[n]=t.bind(e[n],e))})},t.testMode=function(){return!!window.__karma__}}(use("spirit._helpers"));var debug=!0,_=use("spirit._helpers"),log=function(){if(window.__karma__)return!1;if(window.console&&_.isFunction(window.console.log)){var t=[].slice.call(arguments);t.unshift("Spirit: ->"),console.log.apply(console,t)}return!0},globalDefaults={tween:_.isFunction(window.TweenMax)?window.TweenMax:window.TweenLite,timeline:_.isFunction(window.TimelineMax)?window.TimelineMax:window.TimelineLite};!function(t){"use strict";t.Timeline=function(t,e){var n=new globalDefaults.timeline({useFrames:!0,paused:!0}),r=e.mappings;return e.each(function(e){var i=e.get("frame"),o=e.get("previousModel"),s=o?o.get("frame"):0,a=e.get("params").constructTweenObject(r);a.ease=e.get("ease"),o&&(i-=o.get("frame")),_.isEmpty(a)||n.add(globalDefaults.tween.to(t,i,a),s)},this),n}}(use("spirit.factory")),function(t){"use strict";var e=/\s+/,n=function(t,n,r,i){if(!r)return!0;if("object"==typeof r){for(var o in r)t[n].apply(t,[o,r[o]].concat(i));return!1}if(e.test(r)){for(var s=r.split(e),a=0,u=s.length;u>a;a++)t[n].apply(t,[s[a]].concat(i));return!1}return!0},r=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}};t.Events={on:function(t,e,r){if(!n(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!n(this,"once",t,[e,r])||!e)return this;var i=this,o=_.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,s,a,u,c,l,f;if(!this._events||!n(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(a=t?[t]:_.keys(this._events),u=0,c=a.length;c>u;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||r)for(l=0,f=s.length;f>l;l++)o=s[l],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=[].slice.call(arguments,1);if(!n(this,"trigger",t,e))return this;var i=this._events[t],o=this._events.all;return i&&r(i,e),o&&r(o,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||_.isEmpty(t._events))&&delete this._listeningTo[o];return this}}}(use("spirit.event")),function(t){"use strict";var e=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}},n=function(t){var e=t;try{if(_.isString(e)&&exist(e)&&(e=use(e)),e.parseable===!0)return e;if(e.constructor.parseable===!0)return e.constructor}catch(n){}return!1};t.Abstract=function(t,e){this._parseables={},_.each(this.defaults,function(t,e){var r=n(t);r&&(this._parseables[e]=r)},this);var r=t||{};e||(e={}),this.cid=_.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=_.defaults({},r,_.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},t.Abstract.extend=_.extendObjectWithSuper,_.extend(t.Abstract.prototype,use("spirit.event").Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){return _.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(e,n,r){var i,o,s,a,u,c,l,f;if(null==e)return this;if("object"==typeof e?(o=e,r=n):(o={})[e]=n,r||(r={}),!this._validate(o,r))return!1;s=r.unset,u=r.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=_.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)if(n=o[i],_.isEqual(f[i],n)||a.push(i),_.isEqual(l[i],n)?delete this.changed[i]:this.changed[i]=n,s)delete f[i];else{var h=this._parseables[i];f[i]=h?_.isArray(n)||_.isObject(n)&&n instanceof t.Abstract?new h(n):new h:n}if(!u){a.length&&(this._pending=!0);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,f[a[p]],r)}if(c)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,_.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,_.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!_.isEmpty(this.changed):_.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?_.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)_.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(t){t=t?_.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e){return n.set(n.parse(e,t),t)?(r&&r(n,e,t),void n.trigger("sync",n,e,t)):!1},e(this,t),this.sync("read",this,t)},destroy:function(t){t=t?_.clone(t):{};var n=this,r=t.success,i=function(){n.trigger("destroy",n,n.collection,t)};return t.success=function(e){(t.wait||n.isNew())&&i(),r&&r(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew()?(t.success(),!1):(e(this,t),t.wait||i(),!0)},url:function(){var t=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},_.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=_.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,_.extend(e,{validationError:n})),!1):!0}});var r=["keys","values","pairs","invert","pick","omit"];_.each(r,function(e){t.Abstract.prototype[e]=function(){var t=slice.call(arguments);return t.unshift(this.attributes),_[e].apply(_,t)}})}(use("spirit.model")),function(t){"use strict";t.Group=t.Abstract.extend({defaults:{name:"no title",timelines:"spirit.collection.Timelines"},timeline:new globalDefaults.timeline({useFrames:!0,paused:!0}),initialize:function(){_.autoBind(this),this.get("timelines").on("add reset remove change change:transitions",this.constructTimeline),this.constructTimeline()},constructTimeline:function(){return this.timeline.kill(),this.timeline.clear(),this.get("timelines").each(function(t){this.timeline.add(new(use("spirit.factory").Timeline)(t.get("el"),t.get("transitions")).play(),0)},this),this.trigger("construct:timeline",this.timeline),this}})}(use("spirit.model")),function(t){"use strict";t.State=t.Abstract.extend({defaults:{name:"undefined",tweenObj:{}}})}(use("spirit.model")),function(t){"use strict";t.Timeline=t.Abstract.extend({defaults:{el:null,id:null,transitions:"spirit.collection.Transitions"},initialize:function(){if(_.autoBind(this),this.get("el")instanceof $)this.bindModelToElement(),this.applyMappings();else{var t="[data-spirit-id="+this.get("id")+"]",e=$(t);if(!(e.length>0))throw new Error("[spirit.model.Timeline] Can't apply timeline on element. Element: "+t+" can't be found");this.set({el:$(e.get(0))},{silent:!0}),this.bindModelToElement(),this.applyMappings()}return this.get("transitions").on("change change:params",_.bind(function(t){this.trigger("change:transitions",t)},this)),this},bindModelToElement:function(){return this.get("el").data("spirit-model",this),this},applyMappings:function(){this.get("transitions").mappings.push(new(use("spirit.model.vo").RegExpMapping)(/\$this/g,this.get("el")))},destroy:function(){this.get("transitions").mappings=[],this.get("el")&&this.get("el").data("spirit-model",null),this._super()}})}(use("spirit.model")),function(t){"use strict";t.Transition=t.Abstract.extend({defaults:{frame:0,params:"spirit.collection.TransitionParams",ease:"Linear.easeNone"},initialize:function(){_.autoBind(this),this.get("params").on("change",_.bind(function(t){this.trigger("change:params",t)},this))}})}(use("spirit.model")),function(ns){"use strict";ns.TransitionParam=ns.Abstract.extend({defaults:{param:null,value:null},isCSSTransform:function(){var t=ns.TransitionParam.params,e=[t.translateX,t.translateY,t.translateZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.scaleX,t.scaleY];return _.contains(e,this.get("param"))},isEval:function(){return/\{(.*?)\}/.test(this.get("value"))},getValue:function(mappings){var v=this.get("value");if(this.isEval()){if(mappings){var extractionObject={};_.each(_.isArray(mappings)?mappings:[mappings],function(t){t.expression instanceof RegExp&&(t.expression.global&&(t.expression.lastIndex=0),t.expression.test(v)&&(extractionObject[t.expression]=t))});for(var i in extractionObject)v=v.replace(extractionObject[i].expression,"extractionObject["+i+"].map")}try{return eval(v)}catch(e){}}return v}}),ns.TransitionParam.params={autoAlpha:"autoAlpha",translateX:"translateX",translateY:"translateY",translateZ:"translateZ",rotateX:"rotateX",rotateY:"rotateY",rotateZ:"rotateZ",skewX:"skewX",skewY:"skewY",scaleX:"scaleX",scaleY:"scaleY",opacity:"opacity",transformOrigin:"transformOrigin",perspective:"perspective",backgroundPositionX:"backgroundPositionX",backgroundPositionY:"backgroundPositionY",width:"width",height:"height",color:"color",backgroundColor:"backgroundColor",paddingTop:"paddingTop",paddingBottom:"paddingBottom",paddingLeft:"paddingLeft",paddingRight:"paddingRight",marginTop:"marginTop",marginBottom:"marginBottom",marginLeft:"marginLeft",marginRight:"marginRight",fontSize:"fontSize",borderWidth:"borderWidth",borderColor:"borderColor",borderTopWidth:"borderTopWidth",borderBottomWidth:"borderBottomWidth",borderLeftWidth:"borderLeftWidth",borderRightWidth:"borderRightWidth",borderTopColor:"borderTopColor",borderBottomColor:"borderBottomColor",borderLeftColor:"borderLeftColor",borderRightColor:"borderRightColor",borderTopLeftRadius:"borderTopLeftRadius",borderTopRightRadius:"borderTopRightRadius",borderBottomRightRadius:"borderBottomRightRadius",borderBottomLeftRadius:"borderBottomLeftRadius"}}(use("spirit.model")),function(t){"use strict";t.RegExpMapping=function(t,e){this.expression=t,this.map=e}}(use("spirit.model.vo")),function(t){"use strict";var e={add:!0,remove:!0,merge:!0},n={add:!0,remove:!1};t.Abstract=function(t,e){this.model=exist(this.model)?use(this.model):use("spirit.model").Abstract,e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,_.extend({silent:!0},e))},t.Abstract.extend=_.extendObjectWithSuper,_.extend(t.Abstract.prototype,use("spirit.event").Events,{model:"spirit.model.Abstract",initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){return this.set(t,_.extend({merge:!1},e,n))},remove:function(t,e){var n=!_.isArray(t);t=n?[t]:_.clone(t),e||(e={});var r,i,o,s;for(r=0,i=t.length;i>r;r++)s=t[r]=this.get(t[r]),s&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s));return n?t[0]:t},set:function(t,n){n=_.defaults({},n,e),n.parse&&(t=this.parse(t,n));var r=!_.isArray(t);t=r?t?[t]:[]:_.clone(t);var i,o,s,a,u,c,l,f=n.at,h=this.model,p=this.comparator&&null==f&&n.sort!==!1,d=_.isString(this.comparator)?this.comparator:null,g=[],v=[],m={},y=n.add,b=n.merge,w=n.remove,x=!p&&y&&w?[]:!1;for(i=0,o=t.length;o>i;i++){if(u=t[i],s=u instanceof use("spirit.model").Abstract?a=u:u[h.prototype.idAttribute],c=this.get(s))w&&(m[c.cid]=!0),b&&(u=u===a?a.attributes:u,n.parse&&(u=c.parse(u,n)),c.set(u,n),p&&!l&&c.hasChanged(d)&&(l=!0)),t[i]=c;
else if(y){if(a=t[i]=this._prepareModel(u,n),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}x&&x.push(c||a)}if(w){for(i=0,o=this.length;o>i;++i)m[(a=this.models[i]).cid]||v.push(a);v.length&&this.remove(v,n)}if(g.length||x&&x.length)if(p&&(l=!0),this.length+=g.length,null!=f)for(i=0,o=g.length;o>i;i++)this.models.splice(f+i,0,g[i]);else{x&&(this.models.length=0);var T=x||g;for(i=0,o=T.length;o>i;i++)this.models.push(T[i])}if(l&&this.sort({silent:!0}),!n.silent){for(i=0,o=g.length;o>i;i++)(a=g[i]).trigger("add",a,this,n);(l||x&&x.length)&&this.trigger("sort",this,n)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,_.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,_.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,_.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return slice.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return _.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return _.invoke(this.models,"get",t)},create:function(t,e){if(e=e?_.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,e,i){i.wait&&n.add(t,i),r&&r(t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof use("spirit.model").Abstract)return t.collection||(t.collection=this),t;e=e?_.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),t.Abstract.parseable=!0;var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(r,function(e){t.Abstract.prototype[e]=function(){var t=[].slice.call(arguments);return t.unshift(this.models),_[e].apply(_,t)}});var i=["groupBy","countBy","sortBy"];_.each(i,function(e){t.Abstract.prototype[e]=function(t,n){var r=_.isFunction(t)?t:function(e){return e.get(t)};return _[e](this.models,r,n)}})}(use("spirit.collection")),function(t){"use strict";t.Groups=t.Abstract.extend({model:"spirit.model.Group",toJSON:function(){var t=[];return this.each(function(e){t.push({name:e.get("name"),timelines:e.get("timelines").toJSON()})}),t}})}(use("spirit.collection")),function(t){"use strict";t.States=t.Abstract.extend({model:"spirit.model.State"})}(use("spirit.collection")),function(t){"use strict";t.Timelines=t.Abstract.extend({model:"spirit.model.Timeline",toJSON:function(){var t=[];return this.each(function(e){t.push({id:e.get("id"),transitions:e.get("transitions").toJSON()})}),t}})}(use("spirit.collection")),function(t){"use strict";t.TransitionParams=t.Abstract.extend({model:"spirit.model.TransitionParam",constructTweenObject:function(t){var e={},n=use("spirit.model").TransitionParam.params;return _.each(this.filter(function(t){return null!==t.get("param")&&null!==t.get("value")}),function(r){if(r.isCSSTransform())switch(r.get("param")){case n.translateX:e.x=r.getValue(t);break;case n.translateY:e.y=r.getValue(t);break;case n.translateZ:e.z=r.getValue(t);break;case n.rotateX:e.rotationX="+="+r.getValue(t)+"deg";break;case n.rotateY:e.rotationY="+="+r.getValue(t)+"deg";break;case n.rotateZ:e.rotationZ="+="+r.getValue(t)+"deg";break;case n.skewX:e.skewX=r.getValue(t)+"deg";break;case n.skewY:e.skewY=r.getValue(t)+"deg";break;case n.scaleX:e.scaleX=r.getValue(t);break;case n.scaleY:e.scaleY=r.getValue(t)}else e[r.get("param")]=r.getValue(t)}),e},toJSON:function(){var t=[];return this.each(function(e){t.push({param:e.get("param"),value:e.get("value")})}),t}})}(use("spirit.collection")),function(t){"use strict";t.Transitions=t.Abstract.extend({model:"spirit.model.Transition",mappings:[],comparator:"frame",initialize:function(){return _.autoBind(this),this.mappings=[],this.on("reset add remove",this.updateAll),this},updateModel:function(t){var e,n=this.indexOf(t);return n>0&&(e=this.at(n-1)),t.set({previousModel:e}),this},updateAll:function(){return this.each(this.updateModel)},toJSON:function(){var t=[];return this.each(function(e){t.push({frame:e.get("frame"),ease:e.get("ease"),params:e.get("params").toJSON()})}),t}})}(use("spirit.collection")),function(){"use strict";var t=(use("spirit.model"),use("spirit.collection")),e=globalDefaults.tween,n=function(t){var e={};try{var n=t.replace(/'|"/g,"").replace(/((?![\d]+|\.)[#\w\.]+|(\+|-)?[\d]+(%|px|em|deg))/g,'"$1"');e=$.parseJSON(n)}catch(r){}return e};$.fn.spiritAnimateTo=function(){var t=[].slice.call(arguments),e=function(){return _.isString(t[0])},n=function(){return _.isNumber(t[0])};return e()?i.animateToState.apply(this,[t[0],_.isNumber(t[1])?t[1]:r.speed,_.isObject(t[2])?t[2]:{}]):n()?i.animateTo.apply(this,[t[0],_.isObject(t[1])?t[1]:{}]):void $.error("invalid function parameters provided for jQuery.spiritAnimateTo. First param needs to be a state (string) or speed (number)")};var r={speed:1},i={animateToState:function(e,r,o){return this.each(function(){var s=$(this),a=s.data("spirit-states");if(_.isString(a)){var u=new t.States,c=n(a);if(0===_.size(c))return void s.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: could not parse states: "+a});_.each(c,function(t,e){u.add({name:e,tweenObj:t},{silent:!0})}),s.data("spirit-states",u),a=u}if(a instanceof t.States){var l=a.where({name:e});if(0===l.length)return void s.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+e+"] not found on element"});var f=_.first(l).get("tweenObj");_.isObject(f)&&i.animateTo.apply(this,[r,_.extend(f,o)])}else s.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+e+"] not found on element"})})},animateTo:function(t,n){var r=function(){var r=$(this);e&&e.to(r,t,n)};return this instanceof HTMLElement?r.call(this):this.each(r)}}}(),function(t){"use strict";var e=new(use("spirit.collection").Groups);e.on("add remove reset",function(){t.groups.length=e.length}),t.groups={length:0,add:function(t,n){return e.add(t,n)},get:function(t){var n=e.where({name:t});return n.length>0?n[0]:null},at:function(t){return e.at(t)}},t.load=function(t){return e.reset(t)},t.reset=function(){return e.reset()},t.toJSON=function(){return e.toJSON()}}(use("spirit",!0));var dispatchLoadedEvent=function(t){window.spiritLoaded=!0;var e;_.isFunction(window.CustomEvent)?e=new CustomEvent("spirit-loaded",{instance:t}):(e=document.createEvent("Event"),e.initEvent("spirit-loaded",!0,!0),e.instance=t),e&&window.dispatchEvent(e)};"function"==typeof define&&define.amd?define(function(){var t=context.spirit||{};return dispatchLoadedEvent(t),t}):(_.extend(global,context),dispatchLoadedEvent(context.spirit))}(window);
//# sourceMappingURL=spirit.min.js.map