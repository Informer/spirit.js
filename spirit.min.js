/*! Spirit - v0.1.0 - 2014-03-28
* http://spiritjs.io/
* Copyright (c) 2014 Patrick Brouwer; 
*/
(function(global){var context={spirit:{VERSION:"0.1.0"}},use=function(t){for(var e=t.split("."),n=0,r=e.length,i=context;r>n;++n){var o=e[n];i[o]||(i[o]={}),i=i[o]}return i},exist=function(t){if("string"!=typeof t)return!1;for(var e=t.split("."),n=!0,r=0,i=e.length,o=context;i>r;++r){var a=e[r];if(!o[a]){n=!1;break}o=o[a]}return n};(function(t){(function(){function e(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;i>++r;)if(t[r]===e)return r;return-1}function n(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||n===tn)return 1;if(r>n||r===tn)return-1}return t.index-e.index}function r(t){return"\\"+_n[t]}function i(){}function o(t){return t instanceof o?t:new a(t)}function a(t,e){this.__chain__=!!e,this.__wrapped__=t}function s(t,e,n){if("function"!=typeof t)return ze;if(e===tn)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Oe(t,e)}function u(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,a=[];o>++i;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Dn(s)||m(s))){e||(s=u(s,e,n));var l=-1,c=s.length,f=a.length;for(a.length+=c;c>++l;)a[f++]=s[l]}else n||a.push(s)}return a}function l(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var i=typeof t,a=typeof e;if(!(t!==t||t&&mn[i]||e&&mn[a]))return!1;if(null==t||null==e)return t===e;var s=Cn.call(t),u=Cn.call(e);if(s!=u)return!1;switch(s){case cn:case fn:return+t==+e;case pn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case gn:case vn:return t==e+""}var c=s==ln;if(!c){if(Mn.call(t,"__wrapped__ ")||e instanceof o)return l(t.__wrapped__||t,e.__wrapped__||e,n,r);if(s!=dn)return!1;var f=t.constructor,h=e.constructor;if(f!=h&&!(S(f)&&f instanceof f&&S(h)&&h instanceof h))return!1}n||(n=[]),r||(r=[]);for(var p=n.length;p--;)if(n[p]==t)return r[p]==e;var d=!0,g=0;if(n.push(t),r.push(e),c){if(g=e.length,d=g==t.length)for(;g--&&(d=l(t[g],e[g],n,r)););return d}return tr(e,function(e,i,o){return Mn.call(o,i)?(g++,!(d=Mn.call(t,i)&&l(t[i],e,n,r))&&nn):tn}),d&&tr(t,function(t,e,n){return Mn.call(n,e)?!(d=--g>-1)&&nn:tn}),d}function c(t,e,n){for(var r=-1,i=g(),o=t?t.length:0,a=[],s=n?[]:a;o>++r;){var u=t[r],l=n?n(u,r,t):u;(e?!r||s[s.length-1]!==l:0>i(s,l))&&(n&&s.push(l),a.push(u))}return a}function f(t){return function(e,n,r){var i={};n=Re(n,r,3);var o=-1,a=e?e.length:0;if("number"==typeof a)for(;a>++o;){var s=e[o];t(i,s,n(s,o,e),e)}else er(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function h(t,e,n,r,i,o){var a=1&e,s=2&e,u=4&e,l=8&e,c=16&e,f=32&e,d=t;if(!s&&!S(t))throw new TypeError;if(c&&!n.length&&(e&=-17,c=n=!1),f&&!r.length&&(e&=-33,f=r=!1),!a||s||u||f||!(Zn.fastBind||Nn&&c))v=function(){var g=arguments,m=a?i:this;if((u||c||f)&&(g=Fn.call(g),c&&Bn.apply(g,n),f&&Rn.apply(g,r),u&&o>g.length))return e|=16,h(t,l?e:-4&e,g,null,i,o);if(s&&(t=m[d]),this instanceof v){m=p(t.prototype);var _=t.apply(m,g);return R(_)?_:m}return t.apply(m,g)};else{if(c){var g=[i];Rn.apply(g,n)}var v=c?Nn.apply(t,g):Nn.call(t,i)}return v}function p(t){return R(t)?Xn(t):{}}function d(t){return Un[t]}function g(){var t=(t=o.indexOf)===de?e:t;return t}function v(t){return Hn[t]}function m(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Cn.call(t)==un||!1}function _(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function b(t){return R(t)?Dn(t)?Fn.call(t):_({},t):t}function y(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]===tn&&(t[i]=r[i])}return t}function w(t){var e=[];return tr(t,function(t,n){S(t)&&e.push(n)}),e.sort()}function x(t,e){return t?Mn.call(t,e):!1}function A(t){for(var e=-1,n=Qn(t),r=n.length,i={};r>++e;){var o=n[e];i[t[o]]=o}return i}function T(t){return t===!0||t===!1||Cn.call(t)==cn}function j(t){return t?"object"==typeof t&&Cn.call(t)==fn:!1}function k(t){return t?1===t.nodeType:!1}function E(t){if(!t)return!0;if(Dn(t)||Y(t))return!t.length;for(var e in t)if(Mn.call(t,e))return!1;return!0}function O(t,e){return l(t,e)}function M(t){return In(t)&&!Wn(parseFloat(t))}function S(t){return"function"==typeof t}function R(t){return!(!t||!mn[typeof t])}function C(t){return N(t)&&t!=+t}function B(t){return null===t}function N(t){return"number"==typeof t||Cn.call(t)==pn}function X(t){return t&&mn[typeof t]?Cn.call(t)==gn:!1}function Y(t){return"string"==typeof t||Cn.call(t)==vn}function I(t){return t===tn}function W(t){var e=g(),n=u(arguments,!0,!1,1),r={};return tr(t,function(t,i){0>e(n,i)&&(r[i]=t)}),r}function L(t){for(var e=-1,n=Qn(t),r=n.length,i=Array(r);r>++e;){var o=n[e];i[e]=[o,t[o]]}return i}function V(t){for(var e=-1,n=u(arguments,!0,!1,1),r=n.length,i={};r>++e;){var o=n[e];o in t&&(i[o]=t[o])}return i}function z(t){for(var e=-1,n=Qn(t),r=n.length,i=Array(r);r>++e;)i[e]=t[n[e]];return i}function P(t,e){var n=g(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=n(t,e)>-1:er(t,function(t){return(i=t===e)&&nn}),i}function F(t,e,n){var r=!0;e=Re(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i&&(r=!!e(t[i],i,t)););else er(t,function(t,n,i){return!(r=!!e(t,n,i))&&nn});return r}function $(t,e,n){var r=[];e=Re(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i;){var a=t[i];e(a,i,t)&&r.push(a)}else er(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function q(t,e,n){e=Re(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return er(t,function(t,n,r){return e(t,n,r)?(o=t,nn):tn}),o}for(;i>++r;){var a=t[r];if(e(a,r,t))return a}}function Z(t,e){return le(t,e,!0)}function D(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&n===tn?e:s(e,n,3),"number"==typeof i)for(;i>++r&&e(t[r],r,t)!==nn;);else er(t,e)}function J(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var r=Qn(t);n=r.length,er(t,function(t,i,o){return i=r?r[--n]:--n,e(o[i],i,o)===!1&&nn})}}function Q(t,e){var n=Fn.call(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,a=Array("number"==typeof o?o:0);return D(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function U(t,e,n){var r=-1,i=t?t.length:0;if(e=Re(e,n,3),"number"==typeof i)for(var o=Array(i);i>++r;)o[r]=e(t[r],r,t);else o=[],er(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function H(t,e,n){var r=-1/0,i=r,o=-1,a=t?t.length:0;if(e||"number"!=typeof a)e=Re(e,n,3),D(t,function(t,n,o){var a=e(t,n,o);a>r&&(r=a,i=t)});else for(;a>++o;){var s=t[o];s>i&&(i=s)}return i}function G(t,e,n){var r=1/0,i=r,o=-1,a=t?t.length:0;if(e||"number"!=typeof a)e=Re(e,n,3),D(t,function(t,n,o){var a=e(t,n,o);r>a&&(r=a,i=t)});else for(;a>++o;){var s=t[o];i>s&&(i=s)}return i}function K(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r)for(var i=Array(r);r>++n;)i[n]=t[n][e];return i||U(t,e)}function te(t,e,n,r){if(!t)return n;var i=3>arguments.length;e=s(e,r,4);var o=-1,a=t.length;if("number"==typeof a)for(i&&(n=t[++o]);a>++o;)n=e(n,t[o],o,t);else er(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function ee(t,e,n,r){var i=3>arguments.length;return e=s(e,r,4),J(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function ne(t,e,n){return e=Re(e,n,3),$(t,function(t,n,r){return!e(t,n,r)})}function re(t,e,n){var r=t?t.length:0;if("number"!=typeof r&&(t=z(t)),null==e||n)return t?t[$e(r-1)]:tn;var i=ie(t);return i.length=zn(Vn(0,e),i.length),i}function ie(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return D(t,function(t){var n=$e(++e);r[e]=r[n],r[n]=t}),r}function oe(t){var e=t?t.length:0;return"number"==typeof e?e:Qn(t).length}function ae(t,e,n){var r;e=Re(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;o>++i&&!(r=e(t[i],i,t)););else er(t,function(t,n,i){return(r=e(t,n,i))&&nn});return!!r}function se(t,e,r){var i=-1,o=t?t.length:0,a=Array("number"==typeof o?o:0);for(e=Re(e,r,3),D(t,function(t,n,r){a[++i]={criteria:e(t,n,r),index:i,value:t}}),o=a.length,a.sort(n);o--;)a[o]=a[o].value;return a}function ue(t){return Dn(t)?Fn.call(t):t&&"number"==typeof t.length?U(t):z(t)}function le(t,e,n){return n&&E(e)?tn:(n?q:$)(t,e)}function ce(t){for(var e=-1,n=t?t.length:0,r=[];n>++e;){var i=t[e];i&&r.push(i)}return r}function fe(t){for(var e=-1,n=g(),r=t.length,i=u(arguments,!0,!0,1),o=[];r>++e;){var a=t[e];0>n(i,a)&&o.push(a)}return o}function he(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=Re(e,n,3);i>++o&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[0]:tn;return Fn.call(t,0,zn(Vn(0,r),i))}function pe(t,e){return u(t,e)}function de(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?Vn(0,i+r):r||0}else if(r){var o=we(t,n);return t[o]===n?o:-1}return e(t,n,r)}function ge(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Re(e,n,3);o--&&e(t[o],o,t);)r++}else r=null==e||n?1:e||r;return Fn.call(t,0,zn(Vn(0,i-r),i))}function ve(t){var e=arguments,n=e.length,r=-1,i=g(),o=t?t.length:0,a=[];t:for(;o>++r;){var s=t[r];if(0>i(a,s)){for(var u=n;--u;)if(0>i(e[u],s))continue t;a.push(s)}}return a}function me(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var o=i;for(e=Re(e,n,3);o--&&e(t[o],o,t);)r++}else if(r=e,null==r||n)return t?t[i-1]:tn;return Fn.call(t,Vn(0,i-r))}function _e(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Vn(0,r+n):zn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function be(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Vn(0,En((e-t)/n)),o=Array(i);i>++r;)o[r]=t,t+=n;return o}function ye(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,o=t?t.length:0;for(e=Re(e,n,3);o>++i&&e(t[i],i,t);)r++}else r=null==e||n?1:Vn(0,e);return Fn.call(t,r)}function we(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?Re(n,r,1):ze,e=n(e);o>i;){var a=i+o>>>1;e>n(t[a])?i=a+1:o=a}return i}function xe(){return c(u(arguments,!0,!0))}function Ae(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=r&&r[e]===t?null:e,e=!1),null!=n&&(n=Re(n,r,3)),c(t,e,n)}function Te(t){return fe(t,Fn.call(arguments,1))}function je(){for(var t=-1,e=H(K(arguments,"length")),n=Array(0>e?0:e);e>++t;)n[t]=K(arguments,t);return n}function ke(t,e){for(var n=-1,r=t?t.length:0,i={};r>++n;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Ee(t,e){if(!S(e))throw new TypeError;return function(){return 1>--t?e.apply(this,arguments):tn}}function Oe(t,e){return arguments.length>2?h(t,17,Fn.call(arguments,2),null,e):h(t,1,null,null,e)}function Me(t){for(var e=arguments.length>1?u(arguments,!0,!1,1):w(t),n=-1,r=e.length;r>++n;){var i=e[n];t[i]=h(t[i],1,null,null,t)}return t}function Se(){for(var t=arguments,e=t.length;e--;)if(!S(t[e]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Re(t,e,n){var r=typeof t;if(null==t||"function"==r)return s(t,e,n);if("object"!=r)return function(e){return e[t]};var i=Qn(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function Ce(t,e,n){var r,i,o,a,s,u,l,c=0,f=!1,h=!0;if(!S(t))throw new TypeError;if(e=Vn(0,e)||0,n===!0){var p=!0;h=!1}else R(n)&&(p=n.leading,f="maxWait"in n&&(Vn(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var d=function(){var n=e-(Sn()-a);if(0>=n){i&&clearTimeout(i);var f=l;i=u=l=tn,f&&(c=Sn(),o=t.apply(s,r))}else u=setTimeout(d,n)},g=function(){u&&clearTimeout(u),i=u=l=tn,(h||f!==e)&&(c=Sn(),o=t.apply(s,r))};return function(){if(r=arguments,a=Sn(),s=this,l=h&&(u||!p),f===!1)var n=p&&!u;else{i||p||(c=a);var v=f-(a-c);0>=v?(i&&(i=clearTimeout(i)),c=a,o=t.apply(s,r)):i||(i=setTimeout(g,v))}return u||e===f||(u=setTimeout(d,e)),n&&(o=t.apply(s,r)),o}}function Be(t){if(!S(t))throw new TypeError;var e=Fn.call(arguments,1);return setTimeout(function(){t.apply(tn,e)},1)}function Ne(t,e){if(!S(t))throw new TypeError;var n=Fn.call(arguments,2);return setTimeout(function(){t.apply(tn,n)},e)}function Xe(t,e){var n={};return function(){var r=e?e.apply(this,arguments):rn+arguments[0];return Mn.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}}function Ye(t){var e,n;if(!S(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Ie(t){return h(t,16,Fn.call(arguments,1))}function We(t,e,n){var r=!0,i=!0;if(!S(t))throw new TypeError;return n===!1?r=!1:R(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=e,n.trailing=i,Ce(t,e,n)}function Le(t,e){if(!S(e))throw new TypeError;return function(){var n=[t];return Rn.apply(n,arguments),e.apply(this,n)}}function Ve(t){return null==t?"":(t+"").replace(Kn,d)}function ze(t){return t}function Pe(t){D(w(t),function(e){var n=o[e]=t[e];o.prototype[e]=function(){var t=[this.__wrapped__];Rn.apply(t,arguments);var e=n.apply(o,t);return this.__chain__?new a(e,!0):e}})}function Fe(){return bn._=jn,this}function $e(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0,t+On(Pn()*(e-t+1))}function qe(t,e){if(t){var n=t[e];return S(n)?t[e]():n}}function Ze(t,e,n){var i=o,a=i.templateSettings;t||(t=""),n=y({},n,a);var s=0,u="__p += '",l=n.variable,c=RegExp((n.escape||an).source+"|"+(n.interpolate||an).source+"|"+(n.evaluate||an).source+"|$","g");t.replace(c,function(e,n,i,o,a){return u+=t.slice(s,a).replace(sn,r),n&&(u+="' +\n_.escape("+n+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),s=a+e.length,e}),u+="';\n",l||(l="obj",u="with ("+l+" || {}) {\n"+u+"\n}\n"),u="function("+l+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var f=Function("_","return "+u)(i)}catch(h){throw h.source=u,h}return e?f(e):(f.source=u,f)}function De(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=Array(t);for(e=s(e,n,1);t>++r;)i[r]=e(r);return i}function Je(t){return null==t?"":(t+"").replace(Gn,v)}function Qe(t){var e=++en+"";return t?t+e:e}function Ue(t){return t=new a(t),t.__chain__=!0,t}function He(t,e){return e(t),t}function Ge(){return this.__chain__=!0,this}function Ke(){return this.__wrapped__}var tn,en=0,nn={},rn=+new Date+"",on=/<%=([\s\S]+?)%>/g,an=/($^)/,sn=/['\n\r\t\u2028\u2029\\]/g,un="[object Arguments]",ln="[object Array]",cn="[object Boolean]",fn="[object Date]",hn="[object Function]",pn="[object Number]",dn="[object Object]",gn="[object RegExp]",vn="[object String]",mn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},_n={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},bn=mn[typeof window]&&window||this,yn=mn[typeof exports]&&exports&&!exports.nodeType&&exports,wn=mn[typeof module]&&module&&!module.nodeType&&module;wn&&wn.exports===yn&&yn;var xn=mn[typeof global]&&global;!xn||xn.global!==xn&&xn.window!==xn||(bn=xn);var An=[],Tn=Object.prototype,jn=bn._,kn=RegExp("^"+(Tn.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),En=Math.ceil,On=Math.floor,Mn=Tn.hasOwnProperty,Sn=kn.test(Sn=Date.now)&&Sn||function(){return+new Date},Rn=An.push,Cn=Tn.toString,Bn=An.unshift,Nn=kn.test(Nn=Cn.bind)&&Nn,Xn=kn.test(Xn=Object.create)&&Xn,Yn=kn.test(Yn=Array.isArray)&&Yn,In=bn.isFinite,Wn=bn.isNaN,Ln=kn.test(Ln=Object.keys)&&Ln,Vn=Math.max,zn=Math.min,Pn=Math.random,Fn=An.slice,$n=kn.test(bn.attachEvent),qn=Nn&&!/\n|true/.test(Nn+$n);a.prototype=o.prototype;var Zn={};(function(){var t={0:1,length:1};Zn.fastBind=Nn&&!qn,Zn.spliceObjects=(An.splice.call(t,0,1),!t[0])})(1),o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:on,variable:""},Xn||(p=function(t){if(R(t)){i.prototype=t;var e=new i;i.prototype=null}return e||{}}),m(arguments)||(m=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Mn.call(t,"callee")||!1});var Dn=Yn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Cn.call(t)==ln||!1},Jn=function(t){var e,n=t,r=[];if(!n)return r;if(!mn[typeof t])return r;for(e in n)Mn.call(n,e)&&r.push(e);return r},Qn=Ln?function(t){return R(t)?Ln(t):[]}:Jn,Un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Hn=A(Un),Gn=RegExp("("+Qn(Hn).join("|")+")","g"),Kn=RegExp("["+Qn(Un).join("")+"]","g"),tr=function(t,e){var n,r=t,i=r;if(!r)return i;if(!mn[typeof r])return i;for(n in r)if(e(r[n],n,t)===nn)return i;return i},er=function(t,e){var n,r=t,i=r;if(!r)return i;if(!mn[typeof r])return i;for(n in r)if(Mn.call(r,n)&&e(r[n],n,t)===nn)return i;return i};S(/x/)&&(S=function(t){return"function"==typeof t&&Cn.call(t)==hn});var nr=f(function(t,e,n){Mn.call(t,n)?t[n]++:t[n]=1}),rr=f(function(t,e,n){(Mn.call(t,n)?t[n]:t[n]=[]).push(e)}),ir=f(function(t,e,n){t[n]=e});o.after=Ee,o.bind=Oe,o.bindAll=Me,o.chain=Ue,o.compact=ce,o.compose=Se,o.countBy=nr,o.debounce=Ce,o.defaults=y,o.defer=Be,o.delay=Ne,o.difference=fe,o.filter=$,o.flatten=pe,o.forEach=D,o.functions=w,o.groupBy=rr,o.indexBy=ir,o.initial=ge,o.intersection=ve,o.invert=A,o.invoke=Q,o.keys=Qn,o.map=U,o.max=H,o.memoize=Xe,o.min=G,o.omit=W,o.once=Ye,o.pairs=L,o.partial=Ie,o.pick=V,o.pluck=K,o.range=be,o.reject=ne,o.rest=ye,o.shuffle=ie,o.sortBy=se,o.tap=He,o.throttle=We,o.times=De,o.toArray=ue,o.union=xe,o.uniq=Ae,o.values=z,o.where=le,o.without=Te,o.wrap=Le,o.zip=je,o.collect=U,o.drop=ye,o.each=D,o.extend=_,o.methods=w,o.object=ke,o.select=$,o.tail=ye,o.unique=Ae,o.clone=b,o.contains=P,o.escape=Ve,o.every=F,o.find=q,o.has=x,o.identity=ze,o.indexOf=de,o.isArguments=m,o.isArray=Dn,o.isBoolean=T,o.isDate=j,o.isElement=k,o.isEmpty=E,o.isEqual=O,o.isFinite=M,o.isFunction=S,o.isNaN=C,o.isNull=B,o.isNumber=N,o.isObject=R,o.isRegExp=X,o.isString=Y,o.isUndefined=I,o.lastIndexOf=_e,o.mixin=Pe,o.noConflict=Fe,o.random=$e,o.reduce=te,o.reduceRight=ee,o.result=qe,o.size=oe,o.some=ae,o.sortedIndex=we,o.template=Ze,o.unescape=Je,o.uniqueId=Qe,o.all=F,o.any=ae,o.detect=q,o.findWhere=Z,o.foldl=te,o.foldr=ee,o.include=P,o.inject=te,o.first=he,o.last=me,o.sample=re,o.take=he,o.head=he,Pe(o),o.VERSION="2.2.1",o.prototype.chain=Ge,o.prototype.value=Ke,D(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=An[t];o.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),Zn.spliceObjects||0!==t.length||delete t[0],this}}),D(["concat","join","slice"],function(t){var e=An[t];o.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new a(n),n.__chain__=!0),n}}),o.extend(t,o)}).call(t)})(use("spirit._helpers")),function(t){"use strict";var e=function(){};t.extendObject=function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r};var n=function(n,r,i){var o,a=n.prototype,s=/xyz/.test(function(t){})?/\b_super\b/:/.*/;if(o=r&&r.hasOwnProperty("constructor")?r.constructor:function(){n.apply(this,arguments)},t.extend(o,n),e.prototype=n.prototype,o.prototype=new e,r){t.extend(o.prototype,r);for(var u in r)"function"==typeof r[u]&&"function"==typeof a[u]&&s.test(r[u])&&(o.prototype[u]=function(t,e){return function(){var n=this._super;this._super=a[t];var r=e.apply(this,arguments);return this._super=n,r}}(u,r[u]))}return i&&t.extend(o,i),o.prototype.constructor=o,o.__super__=n.prototype,o};t.extendObjectWithSuper=function(e,r){var i=n(this,e,r);return i.extend=t.extendObject,i},t.autoBind=function(e){var n=t.functions(e.constructor.prototype);t.each(n,function(n){"_"!==n.charAt(0)&&-1===t.indexOf(["autoBind","constructor"],n)&&(e[n]=t.bind(e[n],e))})},t.testMode=function(){return!!window.__karma__}}(use("spirit._helpers"));var debug=!0,_=use("spirit._helpers"),log=function(){if(window.__karma__)return!1;if(window.console&&_.isFunction(window.console.log)){var t=[].slice.call(arguments);t.unshift("Spirit: ->"),console.log.apply(console,t)}return!0},globalDefaults={tween:_.isFunction(window.TweenMax)?window.TweenMax:window.TweenLite,timeline:_.isFunction(window.TimelineMax)?window.TimelineMax:window.TimelineLite};(function(t){"use strict";var e=/\s+/,n=function(t,n,r,i){if(!r)return!0;if("object"==typeof r){for(var o in r)t[n].apply(t,[o,r[o]].concat(i));return!1}if(e.test(r)){for(var a=r.split(e),s=0,u=a.length;u>s;s++)t[n].apply(t,[a[s]].concat(i));return!1}return!0},r=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;i>++r;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;i>++r;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;i>++r;)(n=t[r]).callback.apply(n.ctx,e)}};t.Events={on:function(t,e,r){if(!n(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!n(this,"once",t,[e,r])||!e)return this;var i=this,o=_.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,a,s,u,l,c,f;if(!this._events||!n(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(s=t?[t]:_.keys(this._events),u=0,l=s.length;l>u;u++)if(t=s[u],a=this._events[t]){if(this._events[t]=i=[],e||r)for(c=0,f=a.length;f>c;c++)o=a[c],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=[].slice.call(arguments,1);if(!n(this,"trigger",t,e))return this;var i=this._events[t],o=this._events.all;return i&&r(i,e),o&&r(o,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(i||_.isEmpty(t._events))&&delete this._listeningTo[o];return this}}})(use("spirit.event")),function(t){"use strict";var e=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}},n=function(t){var e=t;try{if(_.isString(e)&&exist(e)&&(e=use(e)),e.parseable===!0)return e;if(e.constructor.parseable===!0)return e.constructor}catch(n){}return!1};t.AbstractModel=function(t,e){this._parseables={},_.each(this.defaults,function(t,e){var r=n(t);r&&(this._parseables[e]=r)},this);var r=t||{};e||(e={}),this.cid=_.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=_.defaults({},r,_.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},t.AbstractModel.extend=_.extendObjectWithSuper,_.extend(t.AbstractModel.prototype,use("spirit.event").Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){return _.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(e,n,r){var i,o,a,s,u,l,c,f;if(null==e)return this;if("object"==typeof e?(o=e,r=n):(o={})[e]=n,r||(r={}),!this._validate(o,r))return!1;a=r.unset,u=r.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=_.clone(this.attributes),this.changed={}),f=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)if(n=o[i],_.isEqual(f[i],n)||s.push(i),_.isEqual(c[i],n)?delete this.changed[i]:this.changed[i]=n,a)delete f[i];else{var h=this._parseables[i];f[i]=h?_.isArray(n)||_.isObject(n)&&n instanceof t.AbstractModel?new h(n):new h:n}if(!u){s.length&&(this._pending=!0);for(var p=0,d=s.length;d>p;p++)this.trigger("change:"+s[p],this,f[s[p]],r)}if(l)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,_.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,_.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!_.isEmpty(this.changed):_.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?_.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)_.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(t){t=t?_.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e){return n.set(n.parse(e,t),t)?(r&&r(n,e,t),n.trigger("sync",n,e,t),void 0):!1},e(this,t),this.sync("read",this,t)},destroy:function(t){t=t?_.clone(t):{};var n=this,r=t.success,i=function(){n.trigger("destroy",n,n.collection,t)};return t.success=function(e){(t.wait||n.isNew())&&i(),r&&r(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew()?(t.success(),!1):(e(this,t),t.wait||i(),!0)},url:function(){var t=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},_.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=_.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,_.extend(e,{validationError:n})),!1):!0}});var r=["keys","values","pairs","invert","pick","omit"];_.each(r,function(e){t.AbstractModel.prototype[e]=function(){var t=slice.call(arguments);return t.unshift(this.attributes),_[e].apply(_,t)}})}(use("spirit.model")),function(t){"use strict";t.StateModel=t.AbstractModel.extend({defaults:{name:"undefined",tweenObj:{}}})}(use("spirit.model")),function(t){"use strict";t.TimelineModel=t.AbstractModel.extend({defaults:{el:null,id:null,transitions:"spirit.collection.TransitionCollection"}})}(use("spirit.model")),function(t){"use strict";t.TransitionModel=t.AbstractModel.extend({defaults:{params:null,ease:"Linear.easeNone"}})}(use("spirit.model")),function(ns){"use strict";ns.TransitionParamModel=ns.AbstractModel.extend({defaults:{param:null,value:null},isCSSTransform:function(){var t=ns.TransitionParamModel.params,e=[t.translateX,t.translateY,t.translateZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.scaleX,t.scaleY];return _.contains(e,this.get("param"))},isEval:function(){return/\{(.*?)\}/.test(this.get("value"))},getValue:function(mappings){var v=this.get("value");if(this.isEval()){if(mappings){var extractionObject={};_.each(_.isArray(mappings)?mappings:[mappings],function(t){t.expression instanceof RegExp&&(t.expression.global&&(t.expression.lastIndex=0),t.expression.test(v)&&(extractionObject[t.expression]=t))});for(var i in extractionObject)v=v.replace(extractionObject[i].expression,"extractionObject["+i+"].map")}try{return eval(v)}catch(e){}}return v}}),ns.TransitionParamModel.params={autoAlpha:"autoAlpha",translateX:"translateX",translateY:"translateY",translateZ:"translateZ",rotateX:"rotateX",rotateY:"rotateY",rotateZ:"rotateZ",skewX:"skewX",skewY:"skewY",scaleX:"scaleX",scaleY:"scaleY",opacity:"opacity",transformOrigin:"transformOrigin",perspective:"perspective",backgroundPositionX:"backgroundPositionX",backgroundPositionY:"backgroundPositionY",width:"width",height:"height",color:"color",backgroundColor:"backgroundColor",paddingTop:"paddingTop",paddingBottom:"paddingBottom",paddingLeft:"paddingLeft",paddingRight:"paddingRight",marginTop:"marginTop",marginBottom:"marginBottom",marginLeft:"marginLeft",marginRight:"marginRight",fontSize:"fontSize",borderWidth:"borderWidth",borderColor:"borderColor",borderTopWidth:"borderTopWidth",borderBottomWidth:"borderBottomWidth",borderLeftWidth:"borderLeftWidth",borderRightWidth:"borderRightWidth",borderTopColor:"borderTopColor",borderBottomColor:"borderBottomColor",borderLeftColor:"borderLeftColor",borderRightColor:"borderRightColor",borderTopLeftRadius:"borderTopLeftRadius",borderTopRightRadius:"borderTopRightRadius",borderBottomRightRadius:"borderBottomRightRadius",borderBottomLeftRadius:"borderBottomLeftRadius"}}(use("spirit.model")),function(t){"use strict";t.RegExpMapping=function(t,e){this.expression=t,this.map=e}}(use("spirit.model.vo")),function(t){"use strict";var e={add:!0,remove:!0,merge:!0},n={add:!0,remove:!1};t.AbstractCollection=function(t,e){this.model=exist(this.model)?use(this.model):use("spirit.model").AbstractModel,e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,_.extend({silent:!0},e))},t.AbstractCollection.extend=_.extendObjectWithSuper,_.extend(t.AbstractCollection.prototype,use("spirit.event").Events,{model:"spirit.model.AbstractModel",initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){return this.set(t,_.extend({merge:!1},e,n))},remove:function(t,e){var n=!_.isArray(t);t=n?[t]:_.clone(t),e||(e={});var r,i,o,a;for(r=0,i=t.length;i>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a));return n?t[0]:t},set:function(t,n){n=_.defaults({},n,e),n.parse&&(t=this.parse(t,n));var r=!_.isArray(t);t=r?t?[t]:[]:_.clone(t);var i,o,a,s,u,l,c,f=n.at,h=this.model,p=this.comparator&&null==f&&n.sort!==!1,d=_.isString(this.comparator)?this.comparator:null,g=[],v=[],m={},b=n.add,y=n.merge,w=n.remove,x=!p&&b&&w?[]:!1;for(i=0,o=t.length;o>i;i++){if(u=t[i],a=u instanceof use("spirit.model").AbstractModel?s=u:u[h.prototype.idAttribute],l=this.get(a))w&&(m[l.cid]=!0),y&&(u=u===s?s.attributes:u,n.parse&&(u=l.parse(u,n)),l.set(u,n),p&&!c&&l.hasChanged(d)&&(c=!0)),t[i]=l;else if(b){if(s=t[i]=this._prepareModel(u,n),!s)continue;g.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,null!=s.id&&(this._byId[s.id]=s)}x&&x.push(l||s)}if(w){for(i=0,o=this.length;o>i;++i)m[(s=this.models[i]).cid]||v.push(s);v.length&&this.remove(v,n)}if(g.length||x&&x.length)if(p&&(c=!0),this.length+=g.length,null!=f)for(i=0,o=g.length;o>i;i++)this.models.splice(f+i,0,g[i]);else{x&&(this.models.length=0);var A=x||g;for(i=0,o=A.length;o>i;i++)this.models.push(A[i])}if(c&&this.sort({silent:!0}),!n.silent){for(i=0,o=g.length;o>i;i++)(s=g[i]).trigger("add",s,this,n);(c||x&&x.length)&&this.trigger("sort",this,n)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,_.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,_.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,_.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return slice.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return _.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return _.invoke(this.models,"get",t)},create:function(t,e){if(e=e?_.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,e,i){i.wait&&n.add(t,i),r&&r(t,e,i)
},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof use("spirit.model").AbstractModel)return t.collection||(t.collection=this),t;e=e?_.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),t.AbstractCollection.parseable=!0;var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(r,function(e){t.AbstractCollection.prototype[e]=function(){var t=[].slice.call(arguments);return t.unshift(this.models),_[e].apply(_,t)}});var i=["groupBy","countBy","sortBy"];_.each(i,function(e){t.AbstractCollection.prototype[e]=function(t,n){var r=_.isFunction(t)?t:function(e){return e.get(t)};return _[e](this.models,r,n)}})}(use("spirit.collection")),function(t){"use strict";t.StatesCollection=t.AbstractCollection.extend({model:"spirit.model.StateModel"})}(use("spirit.collection")),function(t){"use strict";t.TransitionCollection=t.AbstractCollection.extend({model:"spirit.model.TransitionModel",initialize:function(){this.on("add",this.added),this.on("remove",this.removed)},added:function(){},removed:function(){}})}(use("spirit.collection")),function(t){"use strict";t.TransitionParamCollection=t.AbstractCollection.extend({model:"spirit.model.TransitionParamModel",constructTweenObject:function(t){var e={},n=use("spirit.model").TransitionParamModel.params,r=this.filter(function(t){return null!==t.get("param")&&null!==t.get("value")});return _.each(r,function(r){if(r.isCSSTransform())switch(r.get("param")){case n.translateX:e.x=r.getValue(t);break;case n.translateY:e.y=r.getValue(t);break;case n.translateZ:e.z=r.getValue(t);break;case n.rotateX:e.rotationX="+="+r.getValue(t)+"deg";break;case n.rotateY:e.rotationY="+="+r.getValue(t)+"deg";break;case n.rotateZ:e.rotationZ="+="+r.getValue(t)+"deg";break;case n.skewX:e.skewX=r.getValue(t)+"deg";break;case n.skewY:e.skewY=r.getValue(t)+"deg";break;case n.scaleX:e.scaleX=r.getValue(t);break;case n.scaleY:e.scaleY=r.getValue(t)}else e[r.get("param")]=r.getValue(t)}),e}})}(use("spirit.collection")),function(){"use strict";var t=(use("spirit.model"),use("spirit.collection")),e=globalDefaults.tween,n=function(t){var e={};try{var n=t.replace(/'|"/g,"").replace(/((?![\d]+|\.)[#\w\.]+|(\+|-)?[\d]+(%|px|em|deg))/g,'"$1"');e=$.parseJSON(n)}catch(r){}return e};$.fn.spiritAnimateTo=function(){var t=[].slice.call(arguments),e=function(){return _.isString(t[0])},n=function(){return _.isNumber(t[0])};return e()?i.animateToState.apply(this,[t[0],_.isNumber(t[1])?t[1]:r.speed,_.isObject(t[2])?t[2]:{}]):n()?i.animateTo.apply(this,[t[0],_.isObject(t[1])?t[1]:{}]):($.error("invalid function parameters provided for jQuery.spiritAnimateTo. First param needs to be a state (string) or speed (number)"),void 0)};var r={speed:1},i={animateToState:function(e,r,o){return this.each(function(){var a=$(this),s=a.data("spirit-states");if(_.isString(s)){var u=new t.StatesCollection,l=n(s);if(0===_.size(l))return a.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: could not parse states: "+s}),void 0;_.each(l,function(t,e){u.add({name:e,tweenObj:t},{silent:!0})}),a.data("spirit-states",u),s=u}if(s instanceof t.StatesCollection){var c=s.where({name:e});if(0===c.length)return a.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+e+"] not found on element"}),void 0;var f=_.first(c).get("tweenObj");_.isObject(f)&&i.animateTo.apply(this,[r,_.extend(f,o)])}else a.trigger("spirit_error",{msg:"jQuery.spiritAnimateTo: State["+e+"] not found on element"})})},animateTo:function(t,n){var r=function(){var r=$(this);e&&e.to(r,t,n)};return this instanceof HTMLElement?r.call(this):this.each(r)}}}(),"function"==typeof define&&define.amd?define(function(){return context.spirit||{}}):_.extend(global,context)})(window);